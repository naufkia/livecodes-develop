{"version":3,"file":"index.8acdd998.js","sources":["../../vite/modulepreload-polyfill","../../src/livecodes/services/allowed-origin.ts","../../src/livecodes/services/share.ts","../../src/livecodes/html/app.html?raw","../../src/livecodes/events/custom-events.ts","../../src/livecodes/utils/utils.ts","../../src/livecodes/main.ts","../../src/index.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export const allowedOrigin = (origin = location.origin) =>\n  Boolean(\n    origin &&\n      (origin.endsWith('livecodes.io') ||\n        origin.endsWith('livecodes.pages.dev') ||\n        origin.endsWith('localpen.io') ||\n        origin.endsWith('localpen.pages.dev') ||\n        origin.startsWith('http://127.0.0.1') ||\n        origin.startsWith('http://localhost')),\n  );\n\nexport const whitelistTarget = (url: string) =>\n  new RegExp(/^(?:(?:http|https):\\/\\/(?:\\w+.)?)(githubusercontent.com|jsbin.com|)\\/(?:.*)/g).test(\n    url,\n  );\n","import { Config } from '../models';\nimport { allowedOrigin } from './allowed-origin';\n\nconst dpasteGetUrl = 'https://dpaste.com/';\nconst dpastePostUrl = 'https://dpaste.com/api/v2/';\nconst apiUrl = 'https://api2.livecodes.io/share';\n\ntype ConfigWithResult = Partial<Config & { result: string }>;\ninterface ShareService {\n  getProject: (id: string) => Promise<ConfigWithResult>;\n  shareProject: (config: ConfigWithResult) => Promise<string>;\n}\n\nconst dpasteService = {\n  getProject: async (id: string): Promise<ConfigWithResult> => {\n    try {\n      const res = await fetch(dpasteGetUrl + id + '.txt');\n      if (!res.ok) return {};\n      return JSON.parse(await res.text());\n    } catch (error) {\n      return {};\n    }\n  },\n  shareProject: async (config: ConfigWithResult): Promise<string> => {\n    try {\n      const res = await fetch(dpastePostUrl, {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'User-Agent': 'LiveCodes / https://livecodes.io/',\n        },\n        body: `content=${encodeURIComponent(JSON.stringify(config))}&title=${encodeURIComponent(\n          config.title || '',\n        )}&syntax=json&expiry_days=365`,\n      });\n      if (!res.ok) return '';\n      const url = await res.text();\n      return url.replace(dpasteGetUrl, '');\n    } catch (error) {\n      return '';\n    }\n  },\n};\n\nconst apiService = {\n  getProject: async (id: string): Promise<ConfigWithResult> => {\n    // for backward compatibility\n    if (id.length < 11) return dpasteService.getProject(id);\n\n    if (!allowedOrigin()) return {};\n    try {\n      const res = await fetch(apiUrl + '?id=' + id);\n      if (!res.ok) return {};\n      return JSON.parse(await res.text());\n    } catch (error) {\n      return {};\n    }\n  },\n  shareProject: async (config: ConfigWithResult): Promise<string> => {\n    if (!allowedOrigin()) return '';\n    try {\n      const res = await fetch(apiUrl, {\n        method: 'POST',\n        mode: 'cors',\n        body: JSON.stringify(config),\n      });\n      if (!res.ok) return '';\n      return res.text();\n    } catch (error) {\n      return '';\n    }\n  },\n};\n\nexport const shareService: ShareService = allowedOrigin() ? apiService : dpasteService;\n","export default \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>LiveCodes</title>\\n    <style>\\n      body {\\n        overflow: hidden;\\n      }\\n    </style>\\n    <link rel=\\\"preconnect\\\" href=\\\"https://cdn.jsdelivr.net\\\" crossorigin />\\n    <link rel=\\\"dns-prefetch\\\" href=\\\"https://cdn.jsdelivr.net\\\" />\\n    <link rel=\\\"stylesheet\\\" href=\\\"{{baseUrl}}{{hash:app.css}}\\\" id=\\\"app-styles\\\" />\\n    <script type=\\\"importmap\\\">\\n      {\\n        \\\"imports\\\": {\\n          \\\"@codemirror/autocomplete\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/commands\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/language\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/lint\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/search\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/state\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/theme-one-dark\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/view\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/lang-html\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/lang-css\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@codemirror/lang-javascript\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@lezer/common\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@lezer/highlight\\\": \\\"{{codemirrorCoreUrl}}\\\",\\n          \\\"@lezer/lr\\\": \\\"{{codemirrorCoreUrl}}\\\"\\n        }\\n      }\\n    </script>\\n  </head>\\n  <body>\\n    <div id=\\\"container\\\">\\n      <div id=\\\"toolbar\\\">\\n        <div id=\\\"logo\\\">\\n          <a href=\\\"/\\\" title=\\\"LiveCodes: Code playground that runs in the browser!\\\"\\n            ><img\\n              alt=\\\"LiveCodes Logo\\\"\\n              src=\\\"{{baseUrl}}assets/images/livecodes-logo.svg\\\"\\n              width=\\\"50\\\"\\n              loading=\\\"lazy\\\"\\n          /></a>\\n        </div>\\n        <div id=\\\"select-editor\\\"></div>\\n        <div id=\\\"project-title\\\" contenteditable=\\\"true\\\" tabindex=\\\"8\\\">Untitled Project</div>\\n        <div id=\\\"buttons\\\">\\n          <a\\n            href=\\\"javascript:void(0)\\\"\\n            id=\\\"run-button\\\"\\n            class=\\\"button hint--bottom\\\"\\n            data-hint=\\\"Run (Shift + Enter)\\\"\\n            tabindex=\\\"9\\\"\\n          >\\n            <img\\n              width=\\\"20\\\"\\n              height=\\\"20\\\"\\n              alt=\\\"Run\\\"\\n              src=\\\"{{baseUrl}}assets/images/play.svg\\\"\\n              loading=\\\"lazy\\\"\\n            />\\n          </a>\\n          <a\\n            href=\\\"javascript:void(0)\\\"\\n            id=\\\"result-button\\\"\\n            class=\\\"button hint--bottom\\\"\\n            data-hint=\\\"Toggle Result\\\"\\n            tabindex=\\\"10\\\"\\n          >\\n            <img\\n              width=\\\"28\\\"\\n              height=\\\"28\\\"\\n              alt=\\\"Result\\\"\\n              src=\\\"{{baseUrl}}assets/images/document.svg\\\"\\n              loading=\\\"lazy\\\"\\n            />\\n          </a>\\n          <a\\n            href=\\\"javascript:void(0)\\\"\\n            id=\\\"fullscreen-button\\\"\\n            class=\\\"button hint--bottom\\\"\\n            data-hint=\\\"Full Screen\\\"\\n            tabindex=\\\"11\\\"\\n          >\\n            <img\\n              width=\\\"28\\\"\\n              height=\\\"28\\\"\\n              alt=\\\"Fullscreen\\\"\\n              src=\\\"{{baseUrl}}assets/images/expand.svg\\\"\\n              loading=\\\"lazy\\\"\\n            />\\n          </a>\\n          <a\\n            href=\\\"javascript:void(0)\\\"\\n            id=\\\"settings-button\\\"\\n            class=\\\"button\\\"\\n            aria-label=\\\"Menu\\\"\\n            tabindex=\\\"12\\\"\\n          >\\n            <img\\n              width=\\\"30\\\"\\n              height=\\\"30\\\"\\n              alt=\\\"Menu\\\"\\n              src=\\\"{{baseUrl}}assets/images/menu.svg\\\"\\n              loading=\\\"lazy\\\"\\n            />\\n          </a>\\n          <div id=\\\"settings-menu-container\\\" class=\\\"menu-scroller\\\"></div>\\n        </div>\\n      </div>\\n      <div id=\\\"editor-container\\\">\\n        <div id=\\\"editors\\\">\\n          <div id=\\\"markup\\\" class=\\\"editor\\\"></div>\\n          <div id=\\\"style\\\" class=\\\"editor\\\"></div>\\n          <div id=\\\"script\\\" class=\\\"editor\\\"></div>\\n\\n          <div id=\\\"editor-tools\\\" class=\\\"tool-buttons\\\">\\n            <span\\n              id=\\\"copy-btn\\\"\\n              class=\\\"hint--top-right\\\"\\n              data-hint=\\\"Copy (Ctrl/Cmd + A, Ctrl/Cmd + C)\\\"\\n            >\\n              <img src=\\\"{{baseUrl}}assets/images/copy.svg\\\" alt=\\\"copy\\\" />\\n            </span>\\n            <span id=\\\"undo-btn\\\" class=\\\"hint--top-right\\\" data-hint=\\\"Undo (Ctrl/Cmd + Z)\\\">\\n              <img src=\\\"{{baseUrl}}assets/images/undo.svg\\\" alt=\\\"undo\\\" />\\n            </span>\\n            <span id=\\\"redo-btn\\\" class=\\\"hint--top-right\\\" data-hint=\\\"Redo (Ctrl/Cmd + Shift + Z)\\\">\\n              <img src=\\\"{{baseUrl}}assets/images/redo.svg\\\" alt=\\\"redo\\\" />\\n            </span>\\n            <span id=\\\"format-btn\\\" class=\\\"hint--top-right\\\" data-hint=\\\"Format (Alt + Shift + F)\\\">\\n              <img src=\\\"{{baseUrl}}assets/images/format.svg\\\" alt=\\\"format\\\" />\\n            </span>\\n            <span id=\\\"editor-status\\\">\\n              <span id=\\\"editor-mode\\\" class=\\\"hint--top-right\\\" data-hint=\\\"Editor Mode\\\"></span>\\n              <span data-status=\\\"markup\\\"></span>\\n              <span data-status=\\\"style\\\"></span>\\n              <span data-status=\\\"script\\\"></span>\\n            </span>\\n            <span id=\\\"external-resources-btn\\\" class=\\\"hint--top-left\\\" data-hint=\\\"External CSS/JS\\\">\\n              <img src=\\\"{{baseUrl}}assets/images/script-sheet.svg\\\" alt=\\\"External CSS/JS\\\" />\\n              <span id=\\\"external-resources-mark\\\" class=\\\"mark\\\"></span>\\n            </span>\\n          </div>\\n          <button id=\\\"code-run-button\\\" class=\\\"hint--top-left\\\" data-hint=\\\"Run (Shift + Enter)\\\">\\n            <img\\n              width=\\\"20\\\"\\n              height=\\\"20\\\"\\n              alt=\\\"Run\\\"\\n              src=\\\"{{baseUrl}}assets/images/play.svg\\\"\\n              loading=\\\"lazy\\\"\\n            />\\n          </button>\\n        </div>\\n        <div id=\\\"output\\\">\\n          <div id=\\\"result\\\" class=\\\"full\\\"></div>\\n          <div id=\\\"tools-pane\\\"></div>\\n        </div>\\n      </div>\\n    </div>\\n    <div id=\\\"overlay\\\" style=\\\"display: none\\\"></div>\\n    <div id=\\\"modal-container\\\" style=\\\"display: none\\\">\\n      <div id=\\\"modal\\\"></div>\\n    </div>\\n    <script src=\\\"https://polyfill.io/v3/polyfill.min.js\\\" crossorigin=\\\"anonymous\\\"></script>\\n    <script type=\\\"module\\\">\\n      import { app } from './livecodes/{{script}}';\\n      window.app = app;\\n    </script>\\n  </body>\\n</html>\\n\"","import { CustomEvents } from '../models';\n\nexport const customEvents: CustomEvents = {\n  load: 'livecodes-load',\n  appLoaded: 'livecodes-app-loaded',\n  ready: 'livecodes-ready',\n  change: 'livecodes-change',\n  testResults: 'livecodes-test-results',\n  destroy: 'livecodes-destroy',\n  resizeEditor: 'livecodes-resize-editor',\n  apiResponse: 'livecodes-api-response',\n};\n","import { Config, Language, Processor } from '../models';\n\nexport const debounce = (fn: (...x: any[]) => any, delay: number | (() => number)) => {\n  let timeout: any;\n\n  return (...args: unknown[]) => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => fn.apply(null, args), typeof delay === 'function' ? delay() : delay);\n  };\n};\n\nexport const decodeHTML = (html: string) => {\n  const txt = document.createElement('textarea');\n  txt.innerHTML = html;\n  return txt.value;\n};\n\nexport const encodeHTML = (html: string) =>\n  html\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/'/g, '&#39;')\n    .replace(/\"/g, '&#34;');\n\nexport const escapeScript = (code: string) => code.replace(/<\\/script>/g, '<\\\\/script>');\n\nexport const escapeCode = (code: string, slash = true) =>\n  code\n    .replace(/\\\\/g, slash ? '\\\\\\\\' : '\\\\')\n    .replace(/`/g, '\\\\`')\n    .replace(/<\\/script>/g, '<\\\\/script>');\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const pipe = (...fns: Function[]) =>\n  fns.reduce(\n    (f, g) =>\n      (...args: any) =>\n        g(f(...args)),\n  );\n\n// replace non-alphanumeric with underscore\nexport const safeName = (name: string, symbol = '_') => name.replace(/[\\W]+/g, symbol);\n\n// from https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\n// added safari (on mac & ios): monaco editor is broken on safari\nexport const isMobile = () => {\n  let mobile = false;\n  const userAgent = navigator.userAgent.toLowerCase();\n  (function (a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n        a,\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4),\n      )\n    ) {\n      mobile = true;\n    }\n  })(userAgent || navigator.vendor || (window as any).opera);\n\n  const safari = userAgent.indexOf('safari') > -1 && userAgent.indexOf('chrome') === -1; // chrome says it is safari!\n\n  return mobile || safari;\n};\n\nexport const isRelativeUrl = (url?: string) =>\n  !url?.startsWith('http') && !url?.startsWith('data:');\n\nexport const getAbsoluteUrl = (url: string, baseUrl = document.baseURI) =>\n  isRelativeUrl(url) ? new URL(url, baseUrl).href : url;\n\nexport const cloneObject = <T>(x: Record<string, any>): T => JSON.parse(JSON.stringify(x));\n\nexport const objectMap = (\n  obj: Record<string, any>,\n  fn: (value: any, key: string, index: number) => any,\n) => Object.fromEntries(Object.entries(obj).map(([k, v], i) => [k, fn(v, k, i)]));\n\nexport const objectFilter = (\n  obj: Record<string, any>,\n  predicate: (value: any, key: string, index: number) => any,\n) => Object.fromEntries(Object.entries(obj).filter(([k, v], i) => predicate(v, k, i)));\n\nexport const copyToClipboard = (text: string) => {\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n    const textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      // eslint-disable-next-line no-console\n      console.warn('Copy to clipboard failed.', ex);\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\n\nexport const stringToValidJson = (str: string) =>\n  str\n    .replace(/'[^'\"]*'(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g, function replaceSingleQuotes(matchedStr) {\n      return '\"' + matchedStr.substring(1, matchedStr.length - 1) + '\"';\n    })\n    .replace(\n      /(\\w+(?=([^\"\\\\]*(\\\\.|\"([^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^\"]*$))(\\s*:)(?!(\\w*)(?:\"))/gm,\n      function quoteNonQuoted(matchedStr) {\n        return '\"' + matchedStr.substring(0, matchedStr.length - 1).trimEnd() + '\":';\n      },\n    )\n    .replace(/,\\s*([\\]}])/g, '$1'); // remove trailing comma\n\nexport const stringify = (obj: any, pretty = false) => {\n  try {\n    return JSON.stringify(obj, undefined, pretty ? 2 : undefined);\n  } catch {\n    return '';\n  }\n};\n\nexport const getRandomString = () => String(Math.random()) + '-' + Date.now().toFixed();\n\nexport const downloadFile = (filename: string, extension: string, content: string) => {\n  const a = document.createElement('a');\n  a.style.display = 'none';\n  a.href = content;\n  a.download = safeName(filename) + '.' + extension;\n  a.click();\n  a.remove();\n};\n\nexport const loadScript = (url: string, name?: string) =>\n  new Promise((resolve, reject) => {\n    if (name && (window as any)[name]) {\n      return resolve((window as any)[name]);\n    }\n\n    const script = document.createElement('script');\n    script.src = url;\n    script.async = true;\n    const removeEventListeners = () => {\n      script.removeEventListener('load', onLoad);\n      script.removeEventListener('error', onError);\n    };\n    const onLoad = () => {\n      removeEventListeners();\n      if (!name) {\n        return resolve('loaded: ' + url);\n      }\n      const i = setInterval(() => {\n        if ((window as any)[name]) {\n          clearInterval(i);\n          return resolve((window as any)[name]);\n        }\n      }, 5);\n    };\n    const onError = () => {\n      removeEventListeners();\n      reject('failed to load: ' + url);\n    };\n    script.addEventListener('load', onLoad);\n    script.addEventListener('error', onError);\n    document.head.appendChild(script);\n  });\n\nexport const loadStylesheet = (url: string, id?: string, insertBefore?: string) => {\n  if (id && document.getElementById(id)) return;\n  const stylesheet = document.createElement('link');\n  stylesheet.rel = 'stylesheet';\n  stylesheet.href = url;\n  stylesheet.id = id || 'styles-' + getRandomString();\n  document.head.insertBefore(\n    stylesheet,\n    insertBefore ? document.querySelector(insertBefore) : null,\n  );\n};\n\nexport const typedArrayToBuffer = (array: Uint8Array): ArrayBuffer =>\n  array.buffer.slice(array.byteOffset, array.byteLength + array.byteOffset);\n\nexport const getDate = () => {\n  let date = new Date();\n  const offset = date.getTimezoneOffset();\n  date = new Date(date.getTime() - offset * 60 * 1000);\n  return date.toISOString().split('T')[0];\n};\n\nexport const handleFetchError = (res: Response) => (res.ok ? res : Promise.reject());\nexport const fetchWithHandler = (input: RequestInfo, init?: RequestInit) =>\n  fetch(input, init).then(handleFetchError);\n\nexport const blobToBase64 = (file: Blob): Promise<string> =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => (typeof reader.result === 'string' ? resolve(reader.result) : reject());\n    reader.onerror = (error) => reject(error);\n  });\n\nexport const Uint8ArrayToBase64 = (u8: Uint8Array) => {\n  const CHUNK_SZ = 0x8000;\n  const c = [];\n  for (let i = 0; i < u8.length; i += CHUNK_SZ) {\n    c.push(String.fromCharCode.apply(null, (u8 as any).subarray(i, i + CHUNK_SZ)));\n  }\n  return btoa(c.join(''));\n};\n\nexport const base64ToUint8Array = (str: string) =>\n  new Uint8Array(\n    atob(str)\n      .split('')\n      .map((c) => c.charCodeAt(0)),\n  );\n\nexport const typedArraysAreEqual = (a: Uint8Array, b: Uint8Array) => {\n  if (a === b) {\n    return true;\n  }\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  for (let i = 0; i < a.byteLength; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const getWorkerDataURL = (url: string) => {\n  const content = `importScripts(\"${url}\");`;\n  return 'data:text/javascript;base64,' + btoa(content);\n};\n\nexport const removeComments = (src: string) =>\n  src.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, '$1');\n\nexport const removeStrings = (src: string) =>\n  src\n    .replace(/'[^\\n']*'/gm, \"''\")\n    .replace(/\"[^\\n\"]*\"/gm, '\"\"')\n    .replace(/`[^`]*`/gm, '``');\n\nexport const removeCommentsAndStrings = (src: string) => removeStrings(removeComments(src));\n\nexport const getLanguageCustomSettings = (language: Language | Processor, config: Config) => ({\n  ...(config.customSettings as any)[language],\n});\n\nexport const getValidUrl = (url?: string) => {\n  if (!url) return null;\n  let validUrl = null;\n  if (url.startsWith('http') || url.startsWith('data:')) {\n    try {\n      validUrl = new URL(url).href;\n    } catch {\n      try {\n        validUrl = new URL(decodeURIComponent(url)).href;\n      } catch {\n        //\n      }\n    }\n  }\n  return validUrl;\n};\n\nexport const runOrContinue =\n  <T>(fn: (x: T) => Promise<T>, catchFn?: (err: unknown) => void) =>\n  async (x: T): Promise<T> => {\n    try {\n      const result = await fn(x);\n      return result;\n    } catch (error) {\n      if (typeof catchFn === 'function') {\n        catchFn(error);\n      }\n      return x;\n    }\n  };\n\nexport const getFileExtension = (file: string) => file.split('.')[file.split('.').length - 1];\n\nexport const isInIframe = () => {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return true;\n  }\n};\n\nexport const indentCode = (code: string, spaces: number, skipFirstLine = true) =>\n  (skipFirstLine ? '' : ' '.repeat(spaces)) + code.split('\\n').join('\\n' + ' '.repeat(spaces));\n","/* eslint-disable import/no-internal-modules */\n// @ts-ignore\n// eslint-disable-next-line import/no-unresolved\nimport appHTML from './html/app.html?raw';\nimport { customEvents } from './events/custom-events';\nimport type { API, Config, EmbedOptions } from './models';\nimport { isInIframe } from './utils/utils';\n\nexport type { API, Config };\n\nexport const params = new URLSearchParams(location.search);\nexport const isLite = params.get('lite') != null && params.get('lite') !== 'false';\nexport const isEmbed =\n  isLite || (params.get('embed') != null && params.get('embed') !== 'false') || isInIframe();\nexport const loadingParam = params.get('loading');\nexport const clickToLoad = isEmbed && loadingParam !== 'eager';\nexport const loading: EmbedOptions['loading'] = !isEmbed\n  ? 'eager'\n  : loadingParam === 'lazy' || loadingParam === 'click' || loadingParam === 'eager'\n  ? loadingParam\n  : 'lazy';\n\nexport const livecodes = async (container: string, config: Partial<Config> = {}): Promise<API> =>\n  new Promise(async (resolve) => {\n    const containerElement = document.querySelector(container);\n    if (!containerElement) {\n      throw new Error(`Cannot find element with the selector: \"${container}\"`);\n    }\n    const baseUrl =\n      (location.origin + location.pathname).split('/').slice(0, -1).join('/') + '/livecodes/';\n    const scriptFile = isLite\n      ? '{{hash:lite.js}}'\n      : isEmbed\n      ? '{{hash:embed.js}}'\n      : '{{hash:app.js}}';\n    const anyOrigin = '*';\n\n    const style = document.createElement('style');\n    style.innerHTML = `\n        ${container} {\n            min-width: 300px;\n            min-height: 200px;\n            padding: 0;\n            overflow: hidden;\n        }\n        ${container} > iframe {\n            border: 0;\n            width: 100%;\n            height: 100%;\n        }\n        ${container}.embed iframe {\n            width: calc(100% - 2px);\n            height: calc(100% - 2px);\n            border: 1px solid #001b25;\n            border-radius: 5px;\n        }\n    `;\n    document.head.appendChild(style);\n\n    const loadApp = () => {\n      const iframe = document.createElement('iframe');\n      iframe.name = 'app';\n      iframe.style.display = 'none';\n\n      containerElement.appendChild(iframe);\n      iframe.contentWindow?.document.open();\n      iframe.contentWindow?.document.write(\n        appHTML\n          .replace(/{{baseUrl}}/g, baseUrl)\n          .replace(/{{script}}/g, scriptFile)\n          .replace(\n            /{{codemirrorCoreUrl}}/g,\n            `${baseUrl}vendor/codemirror/${process.env.codemirrorVersion}/codemirror-core.js`,\n          ),\n      );\n      iframe.contentWindow?.document.close();\n\n      if (isEmbed) {\n        window.addEventListener(customEvents.appLoaded, () => {\n          parent.postMessage({ type: customEvents.appLoaded }, anyOrigin);\n        });\n\n        window.addEventListener(customEvents.ready, () => {\n          parent.postMessage({ type: customEvents.ready }, anyOrigin);\n        });\n\n        window.addEventListener(customEvents.change, () => {\n          parent.postMessage({ type: customEvents.change }, anyOrigin);\n        });\n      }\n\n      iframe.addEventListener('load', async () => {\n        const app = (iframe.contentWindow as any)?.app;\n        if (typeof app === 'function') {\n          const api: API = await app(config, baseUrl);\n          iframe.style.display = 'block';\n          window.dispatchEvent(\n            new CustomEvent(customEvents.appLoaded, {\n              detail: api,\n            }),\n          );\n\n          addEventListener(\n            'message',\n            async (e: MessageEventInit<{ method: keyof API; args: any }>) => {\n              if (isEmbed) {\n                if (e.source !== parent) return;\n                const { method, args } = e.data || {};\n                if (!method) return;\n                const methodArguments = Array.isArray(args) ? args : [args];\n                let payload;\n                try {\n                  payload = await (api[method] as any)(...methodArguments);\n                } catch (error: any) {\n                  payload = { error: error.message || error };\n                }\n                parent.postMessage(\n                  {\n                    type: customEvents.apiResponse,\n                    method,\n                    payload,\n                  },\n                  anyOrigin,\n                );\n              } else {\n                if (e.source !== iframe.contentWindow) return;\n                if (e.data?.args === 'home') {\n                  location.href = '/';\n                }\n              }\n            },\n          );\n\n          resolve(api);\n        }\n      });\n    };\n\n    if (clickToLoad) {\n      window.addEventListener(customEvents.load, loadApp, { once: true });\n\n      const preloadLink = document.createElement('link');\n      preloadLink.href = baseUrl + scriptFile;\n      preloadLink.rel = 'preload';\n      preloadLink.as = 'script';\n      document.head.appendChild(preloadLink);\n    } else {\n      loadApp();\n    }\n  });\n","/* eslint-disable import/no-internal-modules */\nimport { shareService } from './livecodes/services/share';\nimport { livecodes, params, isEmbed, loadingParam, clickToLoad, loading } from './livecodes/main';\nimport { customEvents } from './livecodes/events/custom-events';\n\nconst loadPreview = async (id: string) => {\n  if (!id) return;\n  const content = await shareService.getProject(id);\n  if (!content.result) return;\n\n  const previewFrame = document.createElement('iframe');\n  previewFrame.setAttribute(\n    'sandbox',\n    'allow-same-origin allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts',\n  );\n  previewFrame.setAttribute('scrolling', 'no');\n  previewFrame.classList.add('preview');\n  previewFrame.srcdoc = content.result;\n  document.body.appendChild(previewFrame);\n};\n\nif (loadingParam === 'click' && params.get('preview') !== 'false') {\n  const id = params.get('x');\n  if (id?.startsWith('id/')) {\n    loadPreview(id.replace('id/', ''));\n  }\n}\n\nconst animatingLogo = document.querySelector<HTMLElement>('#animating-logo')!;\nconst cube = document.querySelector<HTMLElement>('#cube')!;\nconst clickToLoadEl = document.querySelector<HTMLElement>('#click-to-load')!;\n\nif (isEmbed) {\n  document.body.classList.add('embed');\n  if (clickToLoad) {\n    document.body.classList.add('click-to-load');\n    cube.classList.remove('cube');\n    animatingLogo.classList.add('hidden');\n    animatingLogo.style.display = 'none';\n    clickToLoadEl.style.display = 'flex';\n    clickToLoadEl.classList.add('visible');\n\n    // load on click\n    clickToLoadEl.addEventListener('click', load);\n\n    // load from API\n    addEventListener('message', (e) => {\n      if (e.source === parent && e.data?.type === customEvents.load) {\n        load();\n      }\n    });\n\n    // load on visible\n    if (loading === 'lazy' && 'IntersectionObserver' in window) {\n      const observer = new IntersectionObserver(\n        (entries, observer) => {\n          entries.forEach(async (entry) => {\n            if (entry.isIntersecting) {\n              load();\n              observer.unobserve(document.body);\n            }\n          });\n        },\n        { rootMargin: '150px' },\n      );\n      observer.observe(document.body);\n    }\n  }\n}\n\nlet loadTriggered = false;\nfunction load() {\n  if (loadTriggered) return;\n  clickToLoadEl.classList.remove('visible');\n  document.querySelector('.preview')?.classList.add('hidden');\n  setTimeout(() => {\n    document.body.classList.remove('click-to-load');\n    animatingLogo.style.display = 'flex';\n    animatingLogo.classList.remove('hidden');\n    cube.classList.add('cube');\n    setTimeout(() => {\n      clickToLoadEl.remove();\n      document.querySelector('.preview')?.remove();\n    }, 300);\n  }, 500);\n  window.dispatchEvent(new Event(customEvents.load));\n  loadTriggered = true;\n}\n\nfunction resize() {\n  document.body.style.height = window.innerHeight + 'px';\n}\n\nresize();\nwindow.addEventListener('resize', resize, false);\nsetTimeout(resize, 500);\n\nwindow.addEventListener(customEvents.appLoaded, (e: CustomEventInit) => {\n  animatingLogo.remove();\n  (window as any).livecodes = e.detail;\n});\n\nwindow.addEventListener(customEvents.ready, () => {\n  // project loaded\n});\n\nwindow.addEventListener(customEvents.change, () => {\n  // content change\n});\n\nwindow.addEventListener(customEvents.testResults, (_e: CustomEventInit) => {\n  // const testResults = e.detail;\n});\n\nwindow.addEventListener(customEvents.destroy, () => {\n  window.removeEventListener('resize', resize);\n  document.body.innerHTML = '';\n  document.head.innerHTML = '';\n});\n\nconst decodeConfig = (configParam: string | null) => {\n  const dataUrlPrefix = 'data%3Aapplication%2Fjson%3Bbase64%2C';\n  if (configParam && configParam.startsWith(dataUrlPrefix)) {\n    try {\n      const decoded = decodeURIComponent(configParam.replace(dataUrlPrefix, ''));\n      return JSON.parse(atob(decoded));\n    } catch (err) {\n      //\n    }\n  }\n  return {};\n};\n\nlivecodes('#livecodes', decodeConfig(params.get('config')));\n"],"names":["p","relList","link","processPreload","mutations","mutation","node","getFetchOpts","script","fetchOpts","allowedOrigin","origin","dpasteGetUrl","dpastePostUrl","apiUrl","dpasteService","id","res","config","apiService","shareService","customEvents","isInIframe","params","isLite","isEmbed","loadingParam","clickToLoad","loading","livecodes","container","resolve","containerElement","baseUrl","scriptFile","anyOrigin","style","loadApp","_a","_b","_c","iframe","appHTML","app","api","e","method","args","methodArguments","payload","error","preloadLink","loadPreview","content","previewFrame","animatingLogo","cube","clickToLoadEl","load","entries","observer","entry","loadTriggered","resize","_e","decodeConfig","configParam","dataUrlPrefix","decoded"],"mappings":"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"}