var oe=Object.create;var _=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var ce=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var ae=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports);var le=(t,i,u,g)=>{if(i&&typeof i=="object"||typeof i=="function")for(let d of re(i))!ie.call(t,d)&&d!==u&&_(t,d,{get:()=>i[d],enumerable:!(g=se(i,d))||g.enumerable});return t};var pe=(t,i,u)=>(u=t!=null?oe(ce(t)):{},le(i||!t||!t.__esModule?_(u,"default",{value:t,enumerable:!0}):u,t));var W=ae((Ge,I)=>{var K=function(){var t=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",g={};function d(n,o){if(!g[n]){g[n]={};for(var p=0;p<n.length;p++)g[n][n.charAt(p)]=p}return g[n][o]}var y={compressToBase64:function(n){if(n==null)return"";var o=y._compress(n,6,function(p){return i.charAt(p)});switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(n){return n==null?"":n==""?null:y._decompress(n.length,32,function(o){return d(i,n.charAt(o))})},compressToUTF16:function(n){return n==null?"":y._compress(n,15,function(o){return t(o+32)})+" "},decompressFromUTF16:function(n){return n==null?"":n==""?null:y._decompress(n.length,16384,function(o){return n.charCodeAt(o)-32})},compressToUint8Array:function(n){for(var o=y.compress(n),p=new Uint8Array(o.length*2),c=0,a=o.length;c<a;c++){var x=o.charCodeAt(c);p[c*2]=x>>>8,p[c*2+1]=x%256}return p},decompressFromUint8Array:function(n){if(n==null)return y.decompress(n);for(var o=new Array(n.length/2),p=0,c=o.length;p<c;p++)o[p]=n[p*2]*256+n[p*2+1];var a=[];return o.forEach(function(x){a.push(t(x))}),y.decompress(a.join(""))},compressToEncodedURIComponent:function(n){return n==null?"":y._compress(n,6,function(o){return u.charAt(o)})},decompressFromEncodedURIComponent:function(n){return n==null?"":n==""?null:(n=n.replace(/ /g,"+"),y._decompress(n.length,32,function(o){return d(u,n.charAt(o))}))},compress:function(n){return y._compress(n,16,function(o){return t(o)})},_compress:function(n,o,p){if(n==null)return"";var c,a,x={},E={},L="",T="",h="",v=2,b=3,m=2,r=[],e=0,s=0,f;for(f=0;f<n.length;f+=1)if(L=n.charAt(f),Object.prototype.hasOwnProperty.call(x,L)||(x[L]=b++,E[L]=!0),T=h+L,Object.prototype.hasOwnProperty.call(x,T))h=T;else{if(Object.prototype.hasOwnProperty.call(E,h)){if(h.charCodeAt(0)<256){for(c=0;c<m;c++)e=e<<1,s==o-1?(s=0,r.push(p(e)),e=0):s++;for(a=h.charCodeAt(0),c=0;c<8;c++)e=e<<1|a&1,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=a>>1}else{for(a=1,c=0;c<m;c++)e=e<<1|a,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=0;for(a=h.charCodeAt(0),c=0;c<16;c++)e=e<<1|a&1,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=a>>1}v--,v==0&&(v=Math.pow(2,m),m++),delete E[h]}else for(a=x[h],c=0;c<m;c++)e=e<<1|a&1,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=a>>1;v--,v==0&&(v=Math.pow(2,m),m++),x[T]=b++,h=String(L)}if(h!==""){if(Object.prototype.hasOwnProperty.call(E,h)){if(h.charCodeAt(0)<256){for(c=0;c<m;c++)e=e<<1,s==o-1?(s=0,r.push(p(e)),e=0):s++;for(a=h.charCodeAt(0),c=0;c<8;c++)e=e<<1|a&1,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=a>>1}else{for(a=1,c=0;c<m;c++)e=e<<1|a,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=0;for(a=h.charCodeAt(0),c=0;c<16;c++)e=e<<1|a&1,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=a>>1}v--,v==0&&(v=Math.pow(2,m),m++),delete E[h]}else for(a=x[h],c=0;c<m;c++)e=e<<1|a&1,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=a>>1;v--,v==0&&(v=Math.pow(2,m),m++)}for(a=2,c=0;c<m;c++)e=e<<1|a&1,s==o-1?(s=0,r.push(p(e)),e=0):s++,a=a>>1;for(;;)if(e=e<<1,s==o-1){r.push(p(e));break}else s++;return r.join("")},decompress:function(n){return n==null?"":n==""?null:y._decompress(n.length,32768,function(o){return n.charCodeAt(o)})},_decompress:function(n,o,p){var c=[],a,x=4,E=4,L=3,T="",h=[],v,b,m,r,e,s,f,l={val:p(0),position:o,index:1};for(v=0;v<3;v+=1)c[v]=v;for(m=0,e=Math.pow(2,2),s=1;s!=e;)r=l.val&l.position,l.position>>=1,l.position==0&&(l.position=o,l.val=p(l.index++)),m|=(r>0?1:0)*s,s<<=1;switch(a=m){case 0:for(m=0,e=Math.pow(2,8),s=1;s!=e;)r=l.val&l.position,l.position>>=1,l.position==0&&(l.position=o,l.val=p(l.index++)),m|=(r>0?1:0)*s,s<<=1;f=t(m);break;case 1:for(m=0,e=Math.pow(2,16),s=1;s!=e;)r=l.val&l.position,l.position>>=1,l.position==0&&(l.position=o,l.val=p(l.index++)),m|=(r>0?1:0)*s,s<<=1;f=t(m);break;case 2:return""}for(c[3]=f,b=f,h.push(f);;){if(l.index>n)return"";for(m=0,e=Math.pow(2,L),s=1;s!=e;)r=l.val&l.position,l.position>>=1,l.position==0&&(l.position=o,l.val=p(l.index++)),m|=(r>0?1:0)*s,s<<=1;switch(f=m){case 0:for(m=0,e=Math.pow(2,8),s=1;s!=e;)r=l.val&l.position,l.position>>=1,l.position==0&&(l.position=o,l.val=p(l.index++)),m|=(r>0?1:0)*s,s<<=1;c[E++]=t(m),f=E-1,x--;break;case 1:for(m=0,e=Math.pow(2,16),s=1;s!=e;)r=l.val&l.position,l.position>>=1,l.position==0&&(l.position=o,l.val=p(l.index++)),m|=(r>0?1:0)*s,s<<=1;c[E++]=t(m),f=E-1,x--;break;case 2:return h.join("")}if(x==0&&(x=Math.pow(2,L),L++),c[f])T=c[f];else if(f===E)T=b+b.charAt(0);else return null;h.push(T),c[E++]=b+T.charAt(0),x--,b=T,x==0&&(x=Math.pow(2,L),L++)}}};return y}();typeof define=="function"&&define.amd?define(function(){return K}):typeof I<"u"&&I!=null&&(I.exports=K)});var z=()=>{let t=!1,i=navigator.userAgent.toLowerCase();(function(g){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(g)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(g.substr(0,4)))&&(t=!0)})(i||navigator.vendor||window.opera);let u=i.indexOf("safari")>-1&&i.indexOf("chrome")===-1;return t||u};var N=t=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let i=document.createElement("textarea");i.textContent=t,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(u){return console.warn("Copy to clipboard failed.",u),!1}finally{document.body.removeChild(i)}}return!1};var B=(t,i)=>new Promise((u,g)=>{if(i&&window[i])return u(window[i]);let d=document.createElement("script");d.src=t,d.async=!0;let y=()=>{d.removeEventListener("load",n),d.removeEventListener("error",o)},n=()=>{if(y(),!i)return u("loaded: "+t);let p=setInterval(()=>{if(window[i])return clearInterval(p),u(window[i])},5)},o=()=>{y(),g("failed to load: "+t)};d.addEventListener("load",n),d.addEventListener("error",o),document.head.appendChild(d)});var J="https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.min.js";var C=()=>(Date.now()+""+Math.floor(Math.floor(Math.random()*Date.now()))).substring(0,24);var R=pe(W());var F=`<div id="assets-list-container" class="list-container">
  <div class="modal-title">Assets</div>
  <div class="buttons">
    <button id="assets-add-asset-button" class="button">Add Asset</button>
    <button id="assets-delete-all-button" class="button danger">Delete All</button>
  </div>
  <div class="modal-message" id="assets-container" class="items-container">
    <span id="assets-sort-by-label">Sort By:</span>
    <a href="#" id="assets-sort-by-last-modified" class="active">Date</a>&nbsp;/&nbsp;<a
      href="#"
      id="assets-sort-by-title"
      >File Name</a
    >&nbsp;(<a href="#" id="assets-sorted-asc" style="display: none">\u25B2</a
    ><a href="#" id="assets-sorted-desc">\u25BC</a>)
    <select name="type-filter" id="assets-type-filter">
      <option value="">All types</option>
    </select>
    <input id="search-assets" type="text" placeholder="Search" />
    <a
      href="#"
      id="assets-reset-filters"
      class="hint--bottom"
      data-hint="Reset"
      style="width: auto"
    >
      <svg
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px"
        y="0px"
        viewBox="0 0 489.533 489.533"
        style="width: 1em; height: 1em"
        xml:space="preserve"
      >
        <g>
          <path
            d="M268.175,488.161c98.2-11,176.9-89.5,188.1-187.7c14.7-128.4-85.1-237.7-210.2-239.1v-57.6c0-3.2-4-4.9-6.7-2.9
		l-118.6,87.1c-2,1.5-2,4.4,0,5.9l118.6,87.1c2.7,2,6.7,0.2,6.7-2.9v-57.5c87.9,1.4,158.3,76.2,152.3,165.6
		c-5.1,76.9-67.8,139.3-144.7,144.2c-81.5,5.2-150.8-53-163.2-130c-2.3-14.3-14.8-24.7-29.2-24.7c-17.9,0-31.9,15.9-29.1,33.6
		C49.575,418.961,150.875,501.261,268.175,488.161z"
          />
        </g>
      </svg>
    </a>
    <div class="modal-message no-data">
      <div>You have no saved assets.</div>
    </div>
    <div class="modal-message no-data" id="assets-no-match">
      <div>No assets match these filters.</div>
    </div>
  </div>
</div>
`;var P=`<div id="add-asset-container" class="modal-container">
  <div class="modal-title">Add Asset</div>
  <div class="buttons">
    <button id="assets-button" class="button">Assets</button>
  </div>
  <ul id="add-asset-tabs" class="modal-tabs">
    <li data-target="add-asset-data-url" class="active">Data URL</li>
    <li data-target="add-asset-gh-pages">GitHub Pages</li>
  </ul>
  <div id="add-asset-screens" class="modal-screen-container">
    <div id="add-asset-data-url" class="tab-content active">
      <div class="modal-screen">
        <div class="description">
          Add asset as a base64-encoded
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs"
            target="_blank"
            rel="noopener"
            >data url</a
          >.
        </div>
        <form id="add-asset-data-url-form">
          <label for="asset-data-url-file-input" class="file-input-label">Add file</label>
          <input type="file" id="asset-data-url-file-input" class="file-input" />
        </form>
        <div id="data-url-output" class="clickable" style="width: 100%"></div>
      </div>
    </div>
    <div id="add-asset-gh-pages" class="tab-content">
      <div class="modal-screen">
        <div class="description">
          Deploy asset to GitHub Pages. The file is pushed to
          <span class="code">gh-pages</span> branch of the repo
          <span class="code">livecodes-assets</span> on your GitHub account. If the repo does not
          already exist, a public repo will be created.
        </div>
        <form id="add-asset-gh-pages-form">
          <label
            for="asset-gh-pages-file-input"
            id="asset-gh-pages-file-input-label"
            class="file-input-label"
            >Upload file</label
          >
          <input type="file" id="asset-gh-pages-file-input" class="file-input" />
        </form>
        <div id="gh-pages-output" class="clickable" style="width: 100%"></div>
      </div>
    </div>
  </div>
</div>
`;var G=t=>t.querySelector("#assets-add-asset-button"),Z=t=>t.querySelector("#assets-delete-all-button"),$=t=>t.querySelector("#assets-button"),Q=t=>t.querySelector("#asset-data-url-file-input"),V=t=>t.querySelector("#data-url-output"),Y=t=>t.querySelector("#asset-gh-pages-file-input"),X=t=>t.querySelector("#asset-gh-pages-file-input-label");var ee=t=>t.querySelector("#gh-pages-output");var te=(t,i)=>{N(t)?i.success("URL is copied to clipboard."):i.error("Failed to copy URL.")},fe=(t,i)=>{let u=document.createElement("div");u.classList.add("asset-item");let g=document.createElement("div");g.classList.add("asset-title","overflow-text"),g.textContent=t.filename,u.appendChild(g);let d=document.createElement("img");d.src=ne(t,i),d.classList.add("img-preview"),d.onerror=function(){let a=i+"assets/images/image.svg";d.src!==a&&(d.src=a)},u.appendChild(d);let y=document.createElement("div");y.classList.add("asset-details"),u.appendChild(y);let n=document.createElement("div");n.classList.add("light"),n.textContent="Type: "+t.type,y.appendChild(n);let o=z()?new Date(t.lastModified).toLocaleDateString():new Date(t.lastModified).toLocaleString(),p=document.createElement("div");p.classList.add("light"),p.textContent="Date: "+String(o),y.appendChild(p);let c=document.createElement("div");return c.classList.add("light","overflow-text"),c.textContent="URL: "+t.url,y.appendChild(c),u},ye=(t,i,u,g)=>{let d=document.createElement("li");i.appendChild(d);let y=document.createElement("a");y.href="#",y.dataset.id=t.id,y.classList.add("asset-link","hint--top"),y.dataset.hint="Click to copy URL",y.appendChild(fe(t,g)),y.onclick=o=>{o.preventDefault(),te(t.url,u)},d.appendChild(y);let n=document.createElement("button");return n.classList.add("delete-button"),d.appendChild(n),{link:y,deleteButton:n}},xe=async(t,i,u)=>{let g="date",d="desc",y,n=[],o=document.querySelector("#assets-list-container #assets-sort-by-last-modified"),p=document.querySelector("#assets-list-container #assets-sort-by-title"),c=document.querySelector("#assets-list-container #assets-sorted-asc"),a=document.querySelector("#assets-list-container #assets-sorted-desc"),x=document.querySelector("#assets-list-container #assets-type-filter"),E=document.querySelector("#assets-list-container #search-assets"),L=document.querySelector("#assets-list-container #assets-reset-filters");Array.from(new Set((await t()).map(r=>r.type))).sort((r,e)=>r.toLowerCase()<e.toLowerCase()?-1:r.toLowerCase()>e.toLowerCase()?1:0).forEach(r=>{let e=document.createElement("option");e.text=r,e.value=r,x.appendChild(e)});let T=async()=>(await t()).filter(r=>y?r.type===y:!0).filter(r=>E.value.trim()!==""?n.includes(r.id):!0).sort((r,e)=>g==="date"&&d==="asc"?r.lastModified-e.lastModified:g==="date"&&d==="desc"?e.lastModified-r.lastModified:g==="filename"&&d==="asc"&&r.filename<e.filename?-1:g==="filename"&&d==="asc"&&r.filename>e.filename||g==="filename"&&d==="desc"&&r.filename<e.filename?1:g==="filename"&&d==="desc"&&r.filename>e.filename?-1:0),h=async()=>{i(await T())},v=()=>{d="asc",c.style.display="unset",a.style.display="none"},b=()=>{d="desc",c.style.display="none",a.style.display="unset"},m=async(r=x.value)=>{y=r,await h()};u.addEventListener(o,"click",async r=>{r.preventDefault(),g!=="date"||d==="asc"?b():v(),g="date",o.classList.add("active"),p.classList.remove("active"),await h()},!1),u.addEventListener(p,"click",async r=>{r.preventDefault(),g!=="filename"?v():d==="asc"?b():v(),g="filename",o.classList.remove("active"),p.classList.add("active"),await h()},!1),u.addEventListener(c,"click",async r=>{r.preventDefault(),b(),await h()},!1),u.addEventListener(a,"click",async r=>{r.preventDefault(),v(),await h()},!1),u.addEventListener(x,"change",async()=>{await m()},!1),B(J,"FlexSearch").then(async r=>{let e=new r.Document({index:["filename","type"],tokenize:"full",worker:!0});await Promise.all((await t()).map(s=>e.add(s))),u.addEventListener(E,"keyup",async()=>{n=(await e.searchAsync(E.value)).map(f=>f.result).flat(),await h()},!1)}),u.addEventListener(L,"click",async r=>{r.preventDefault(),g="date",d="desc",y="",n=[],o.classList.add("active"),p.classList.remove("active"),b(),x.value="",E.value="",await h()},!1)},vt=async({assetsStorage:t,eventsManager:i,showScreen:u,notifications:g,modal:d,baseUrl:y})=>{let n=document.createElement("div");n.innerHTML=F;let o=n.firstChild,p=o.querySelector(".no-data"),c=o.querySelector("#assets-no-match.no-data"),a=o.querySelector("#assets-container"),x=document.createElement("ul");x.classList.add("open-list");let E=await t.getAllData(),L=E,T=G(o),h=Z(o);i.addEventListener(T,"click",()=>{u("add-asset")},!1),i.addEventListener(h,"click",async()=>{g.confirm(`Delete ${L.length} assets?`,async()=>{for(let m of L)await t.deleteItem(m.id);L=[],E=await t.getAllData(),await v(L)})},!1),a.appendChild(x);let v=async m=>{L=m,x.innerHTML="",m.forEach(r=>{let{deleteButton:e}=ye(r,x,g,y);i.addEventListener(e,"click",()=>{g.confirm(`Delete asset: ${r.filename}?`,async()=>{await t.deleteItem(r.id),L=L.filter(f=>f.id!==r.id),e.parentElement.classList.add("hidden"),setTimeout(()=>{v(L)},500)})},!1)}),m.length===0?(x.classList.add("hidden"),h.classList.add("hidden"),(await t.getList()).length===0?(p.classList.remove("hidden"),c.classList.add("hidden")):(p.classList.add("hidden"),c.classList.remove("hidden"))):(x.classList.remove("hidden"),h.classList.remove("hidden"),p.classList.add("hidden"),c.classList.add("hidden"))};await v(E);let b=()=>t.getAllData();d.show(o,{isAsync:!0}),xe(b,v,i)},Lt=({assetsStorage:t,eventsManager:i,showScreen:u,notifications:g,deployAsset:d,getUser:y,baseUrl:n,activeTab:o})=>{let p,c=document.createElement("div");c.innerHTML=P;let a=c.firstChild,x=a.querySelectorAll("#add-asset-tabs li"),E=f=>{x.forEach(M=>M.classList.remove("active")),f.classList.add("active"),document.querySelectorAll("#add-asset-screens > div").forEach(M=>{M.classList.remove("active")});let l=a.querySelector("#"+f.dataset.target);l?.classList.add("active"),l?.querySelector("input")?.focus()};x.forEach(f=>{i.addEventListener(f,"click",()=>E(f))}),setTimeout(()=>{o&&E(x[o])});let L=$(a),T=Q(a),h=V(a),v=Y(a),b=X(a),m=ee(a);i.addEventListener(L,"click",()=>{u("assets")},!1);let r=(f,l=!1)=>new Promise((M,S)=>{if(f.files?.length===0)return;let w=f.files[0],A=2*1024*1024;if(w.size>A){S("Error: Exceeded size 2MB");return}let j=new FileReader;i.addEventListener(j,"load",async k=>{let q="";if(l){if(!p){S("Error: Unauthenticated user");return}b.innerText="Uploading...",b.classList.add("disabled");let U=await d(p,{path:w.name,content:k.target?.result.split("base64,")[1]});b.innerText="Upload file",b.classList.remove("disabled"),U?q=U.url:S("Error: Failed to upload file")}q=q||k.target?.result,M({id:C(),filename:w.name,type:he(w.type,w.name),url:q,lastModified:Date.now()})}),i.addEventListener(j,"error",()=>{S("Error: Failed to read file")}),j.readAsDataURL(w)}),e=async(f,l,M=!1)=>{await t.updateItem(f.id,f);let S=document.createElement("p"),w=document.createElement("span");w.textContent="Added file: ",w.classList.add("bold"),S.appendChild(w);let A=document.createElement("span");A.textContent+=f.filename,S.appendChild(A),S.classList.add("overflow-text"),l.appendChild(S);let j=document.createElement("p"),k=document.createElement("span");k.textContent="URL: ",k.classList.add("bold"),j.appendChild(k);let q=document.createElement("span");if(q.textContent+=f.url,j.appendChild(q),j.classList.add("overflow-text"),l.appendChild(j),M){let H=document.createElement("p");H.textContent="The asset should be available on this URL soon.",H.classList.add("description","center"),l.appendChild(H)}else{let H=document.createElement("img");H.src=ne(f,n),H.onerror=function(){let O=n+"assets/images/image.svg";H.src!==O&&(H.src=O)},H.classList.add("img-preview-larger"),l.appendChild(H)}let U=document.createElement("p");U.textContent="Click to copy URL",U.classList.add("description","center"),l.appendChild(U);let D=document.createElement("hr");D.style.margin="1em",l.appendChild(D),l.title="Click to copy URL",g.success("File added to assets!"),l.onclick=()=>te(f.url,g)},s=async(f,l,M=!1)=>{await r(f,M).then(S=>e(S,l,M)).catch(S=>{g.error(S)})};return i.addEventListener(T,"change",()=>{s(T,h)},!1),i.addEventListener(b,"click",async f=>{p=await y(async()=>{await u("add-asset",1)}),p||(f.preventDefault(),g.error("Authentication error!"))},!1),i.addEventListener(v,"change",()=>{s(v,m,!0)},!1),a},he=(t,i)=>{let u={"audio/aac":"audio","video/x-msvideo":"video","image/bmp":"image","application/x-bzip":"archive","application/x-bzip2":"archive","text/css":"stylesheet","text/csv":"csv","application/gzip":"archive","image/gif":"image","text/html":"html","image/vnd.microsoft.icon":"icon","image/jpeg":"image","text/javascript":"script","application/javascript":"script","application/json":"json","application/ld+json":"json","audio/midi":"audio","audio/x-midi":"audio","audio/mpeg":"audio","video/mp4":"video","video/mpeg":"video","audio/ogg":"audio","video/ogg":"video","application/ogg":"audio","audio/opus":"audio","font/otf":"font","image/png":"image","application/vnd.rar":"archive","image/svg+xml":"image","application/x-tar":"archive","image/tiff":"image","video/mp2t":"video","font/ttf":"font","text/plain":"text","audio/wav":"audio","audio/webm":"audio","video/webm":"video","image/webp":"image","font/woff":"font","font/woff2":"font","application/xhtml+xml":"html","application/xml":"xml","application/zip":"archive","video/3gpp":"video","video/3gpp2":"audio","application/x-7z-compressed":"archive"},g={aac:"audio",bmp:"image",bzip:"archive",bzip2:"archive",css:"stylesheet",csv:"csv",gzip:"archive",gif:"image",html:"html",ico:"icon",jpeg:"image",jpg:"image",js:"script",json:"json",midi:"audio",mpeg:"audio",mp4:"video",ogg:"audio",otf:"font",png:"image",rar:"archive",svg:"image",tar:"archive",tiff:"image",mp2t:"video",ttf:"font",txt:"text",wav:"audio",webm:"audio",webp:"image",woff:"font",woff2:"font",xml:"xml",zip:"archive","3gpp":"video","3gpp2":"audio","7z":"archive"},d=i.split(".")[i.split(".").length-1];return u[t]||g[d]||"other"},ne=(t,i)=>{if(t.type==="image"||t.type==="icon")return t.url;let u=i+"assets/images/";return t.type==="other"?u+"file.svg":u+t.type+".svg"};export{Lt as createAddAssetContainer,vt as createAssetsList};
//# sourceMappingURL=assets.js.map
