var J=Object.create;var R=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var Z=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty;var V=(s,i)=>()=>(i||s((i={exports:{}}).exports,i),i.exports);var X=(s,i,y,M)=>{if(i&&typeof i=="object"||typeof i=="function")for(let x of G(i))!Q.call(s,x)&&x!==y&&R(s,x,{get:()=>i[x],enumerable:!(M=K(i,x))||M.enumerable});return s};var Y=(s,i,y)=>(y=s!=null?J(Z(s)):{},X(i||!s||!s.__esModule?R(y,"default",{value:s,enumerable:!0}):y,s));var _=V((Oe,q)=>{var F=function(){var s=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",M={};function x(o,r){if(!M[o]){M[o]={};for(var l=0;l<o.length;l++)M[o][o.charAt(l)]=l}return M[o][r]}var b={compressToBase64:function(o){if(o==null)return"";var r=b._compress(o,6,function(l){return i.charAt(l)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:b._decompress(o.length,32,function(r){return x(i,o.charAt(r))})},compressToUTF16:function(o){return o==null?"":b._compress(o,15,function(r){return s(r+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:b._decompress(o.length,16384,function(r){return o.charCodeAt(r)-32})},compressToUint8Array:function(o){for(var r=b.compress(o),l=new Uint8Array(r.length*2),c=0,a=r.length;c<a;c++){var d=r.charCodeAt(c);l[c*2]=d>>>8,l[c*2+1]=d%256}return l},decompressFromUint8Array:function(o){if(o==null)return b.decompress(o);for(var r=new Array(o.length/2),l=0,c=r.length;l<c;l++)r[l]=o[l*2]*256+o[l*2+1];var a=[];return r.forEach(function(d){a.push(s(d))}),b.decompress(a.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":b._compress(o,6,function(r){return y.charAt(r)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),b._decompress(o.length,32,function(r){return x(y,o.charAt(r))}))},compress:function(o){return b._compress(o,16,function(r){return s(r)})},_compress:function(o,r,l){if(o==null)return"";var c,a,d={},L={},E="",S="",g="",h=2,T=3,p=2,m=[],n=0,t=0,v;for(v=0;v<o.length;v+=1)if(E=o.charAt(v),Object.prototype.hasOwnProperty.call(d,E)||(d[E]=T++,L[E]=!0),S=g+E,Object.prototype.hasOwnProperty.call(d,S))g=S;else{if(Object.prototype.hasOwnProperty.call(L,g)){if(g.charCodeAt(0)<256){for(c=0;c<p;c++)n=n<<1,t==r-1?(t=0,m.push(l(n)),n=0):t++;for(a=g.charCodeAt(0),c=0;c<8;c++)n=n<<1|a&1,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=a>>1}else{for(a=1,c=0;c<p;c++)n=n<<1|a,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=0;for(a=g.charCodeAt(0),c=0;c<16;c++)n=n<<1|a&1,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=a>>1}h--,h==0&&(h=Math.pow(2,p),p++),delete L[g]}else for(a=d[g],c=0;c<p;c++)n=n<<1|a&1,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=a>>1;h--,h==0&&(h=Math.pow(2,p),p++),d[S]=T++,g=String(E)}if(g!==""){if(Object.prototype.hasOwnProperty.call(L,g)){if(g.charCodeAt(0)<256){for(c=0;c<p;c++)n=n<<1,t==r-1?(t=0,m.push(l(n)),n=0):t++;for(a=g.charCodeAt(0),c=0;c<8;c++)n=n<<1|a&1,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=a>>1}else{for(a=1,c=0;c<p;c++)n=n<<1|a,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=0;for(a=g.charCodeAt(0),c=0;c<16;c++)n=n<<1|a&1,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=a>>1}h--,h==0&&(h=Math.pow(2,p),p++),delete L[g]}else for(a=d[g],c=0;c<p;c++)n=n<<1|a&1,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=a>>1;h--,h==0&&(h=Math.pow(2,p),p++)}for(a=2,c=0;c<p;c++)n=n<<1|a&1,t==r-1?(t=0,m.push(l(n)),n=0):t++,a=a>>1;for(;;)if(n=n<<1,t==r-1){m.push(l(n));break}else t++;return m.join("")},decompress:function(o){return o==null?"":o==""?null:b._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,r,l){var c=[],a,d=4,L=4,E=3,S="",g=[],h,T,p,m,n,t,v,e={val:l(0),position:r,index:1};for(h=0;h<3;h+=1)c[h]=h;for(p=0,n=Math.pow(2,2),t=1;t!=n;)m=e.val&e.position,e.position>>=1,e.position==0&&(e.position=r,e.val=l(e.index++)),p|=(m>0?1:0)*t,t<<=1;switch(a=p){case 0:for(p=0,n=Math.pow(2,8),t=1;t!=n;)m=e.val&e.position,e.position>>=1,e.position==0&&(e.position=r,e.val=l(e.index++)),p|=(m>0?1:0)*t,t<<=1;v=s(p);break;case 1:for(p=0,n=Math.pow(2,16),t=1;t!=n;)m=e.val&e.position,e.position>>=1,e.position==0&&(e.position=r,e.val=l(e.index++)),p|=(m>0?1:0)*t,t<<=1;v=s(p);break;case 2:return""}for(c[3]=v,T=v,g.push(v);;){if(e.index>o)return"";for(p=0,n=Math.pow(2,E),t=1;t!=n;)m=e.val&e.position,e.position>>=1,e.position==0&&(e.position=r,e.val=l(e.index++)),p|=(m>0?1:0)*t,t<<=1;switch(v=p){case 0:for(p=0,n=Math.pow(2,8),t=1;t!=n;)m=e.val&e.position,e.position>>=1,e.position==0&&(e.position=r,e.val=l(e.index++)),p|=(m>0?1:0)*t,t<<=1;c[L++]=s(p),v=L-1,d--;break;case 1:for(p=0,n=Math.pow(2,16),t=1;t!=n;)m=e.val&e.position,e.position>>=1,e.position==0&&(e.position=r,e.val=l(e.index++)),p|=(m>0?1:0)*t,t<<=1;c[L++]=s(p),v=L-1,d--;break;case 2:return g.join("")}if(d==0&&(d=Math.pow(2,E),E++),c[v])S=c[v];else if(v===L)S=T+T.charAt(0);else return null;g.push(S),c[L++]=T+S.charAt(0),d--,T=S,d==0&&(d=Math.pow(2,E),E++)}}};return b}();typeof define=="function"&&define.amd?define(function(){return F}):typeof q<"u"&&q!=null&&(q.exports=F)});var A=`<div id="share-screen" class="modal-container">
  <div class="modal-title">Share</div>
  <div class="modal-content">
    <div id="share-click-to-copy" class="description light"></div>
    <input type="text" id="share-url-input" readonly />
    <div id="share-expiry" class="share-expiry description light">
      <div class="share-short-url-expiry"><span>&nbsp;</span><a href="#">Get encoded URL</a></div>
      <div class="share-permanent-url-expiry">
        <span class="{{warnClass}}">{{urlLength}} characters</span><a href="#">Get short URL</a>
      </div>
    </div>
    <div id="share-expiry-self-hosted" class="share-expiry description light">
      <div class="share-short-url-expiry">
        <span class="danger">Expires in 1 year</span><a href="#">Get permanent URL</a>
      </div>
      <div class="share-permanent-url-expiry">
        <span class="{{warnClass}}">{{urlLength}} characters</span><a href="#">Get short URL</a>
      </div>
    </div>
    <div id="share-links-container">
      <ul id="share-links"></ul>
      <div id="qrcode-container">Generating...</div>
    </div>
  </div>
</div>
`;var j=(s=location.origin)=>Boolean(s&&(s.endsWith("livecodes.io")||s.endsWith("livecodes.pages.dev")||s.endsWith("localpen.io")||s.endsWith("localpen.pages.dev")||s.startsWith("http://127.0.0.1")||s.startsWith("http://localhost")));var te=s=>!s?.startsWith("http")&&!s?.startsWith("data:"),P=(s,i=document.baseURI)=>te(s)?new URL(s,i).href:s;var $=s=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let i=document.createElement("textarea");i.textContent=s,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(y){return console.warn("Copy to clipboard failed.",y),!1}finally{document.body.removeChild(i)}}return!1};var I=(s,i)=>new Promise((y,M)=>{if(i&&window[i])return y(window[i]);let x=document.createElement("script");x.src=s,x.async=!0;let b=()=>{x.removeEventListener("load",o),x.removeEventListener("error",r)},o=()=>{if(b(),!i)return y("loaded: "+s);let l=setInterval(()=>{if(window[i])return clearInterval(l),y(window[i])},5)},r=()=>{b(),M("failed to load: "+s)};x.addEventListener("load",o),x.addEventListener("error",r),document.head.appendChild(x)});var O="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js";var C=Y(_());var D="https://dpaste.com/",re="https://dpaste.com/api/v2/",N="https://api2.livecodes.io/share",W={getProject:async s=>{try{let i=await fetch(D+s+".txt");return i.ok?JSON.parse(await i.text()):{}}catch{return{}}},shareProject:async s=>{try{let i=await fetch(re,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":"LiveCodes / https://livecodes.io/"},body:`content=${encodeURIComponent(JSON.stringify(s))}&title=${encodeURIComponent(s.title||"")}&syntax=json&expiry_days=365`});return i.ok?(await i.text()).replace(D,""):""}catch{return""}}},se={getProject:async s=>{if(s.length<11)return W.getProject(s);if(!j())return{};try{let i=await fetch(N+"?id="+s);return i.ok?JSON.parse(await i.text()):{}}catch{return{}}},shareProject:async s=>{if(!j())return"";try{let i=await fetch(N,{method:"POST",mode:"cors",body:JSON.stringify(s)});return i.ok?i.text():""}catch{return""}}},gt=j()?se:W;var B=()=>document.querySelector("#qrcode-container");var f=encodeURIComponent,It=async(s,i,y)=>{let M,x=e=>{(!e||!$(e))&&t("Copy to clipboard failed!"),t("URL copied to clipboard"),M=setTimeout(()=>{t("Click to copy")},5e3)},b=async()=>{let e=B();if(g.style.visibility="hidden",e.style.display="flex",L){p?.classList.add("short-url"),T&&d&&(T.value=d.url);return}await v();let H=(await I(O,"qrcode"))(0,"L");H.addData(d.url),H.make(),L=H.createImgTag(6,10),e.innerHTML=L},o=(e,u,U)=>{U&&(U.innerHTML="",u.forEach(w=>{let H=document.createElement("li"),k=document.createElement("a");k.href=w.createShareUrl?.(e)||"#",k.target="blank",k.rel="noopener noreferrer",k.innerHTML=`
        <span class="share-image-container">
          <img
            src="${P(i)+"assets/icons/"+w.icon}"
            alt="${w.name}"
          />
        </span>
        ${w.name}
      `,w.onClick&&y.addEventListener(k,"click",async z=>{z.preventDefault(),w.onClick?.(e)}),H.appendChild(k),U.appendChild(H),w.name==="Share via \u2026"&&!navigator.share&&H.remove()}),T&&(T.value=e.url),t("Click to copy"))},r=[{name:"Facebook",icon:"facebook.svg",createShareUrl:({url:e})=>`https://www.facebook.com/sharer.php?u=${f(e)}`},{name:"Twitter",icon:"twitter.svg",createShareUrl:({url:e,title:u})=>`https://twitter.com/intent/tweet?url=${f(e)}&text=${f(u)}`},{name:"Hacker News",icon:"hacker-news.svg",createShareUrl:({url:e,title:u})=>`https://news.ycombinator.com/submitlink?u=${f(e)}&t=${f(u)}`},{name:"Reddit",icon:"reddit.svg",createShareUrl:({url:e,title:u})=>`https://www.reddit.com/submit?url=${f(e)}&title=${f(u)}`},{name:"LinkedIn",icon:"linkedin.svg",createShareUrl:({url:e,title:u})=>`https://www.linkedin.com/shareArticle?url=${f(e)}&title=${f(u)}&mini=true&source=LiveCodes`},{name:"Dev.to",icon:"dev.svg",createShareUrl:({url:e,title:u})=>`https://dev.to/new?prefill=${f(`---
title: `+u+`
published: true
tags: livecodes
---



`+e)}`},{name:"Tumblr",icon:"tumblr.svg",createShareUrl:({url:e,title:u})=>`
      https://www.tumblr.com/share/link?url=${f(e)}&name=${f(u)}`},{name:"Pinterest",icon:"pinterest.svg",createShareUrl:({url:e,title:u})=>`https://pinterest.com/pin/create/bookmarklet/?url=${f(e)}&description=${f(u)}`},{name:"WhatsApp",icon:"whatsapp.svg",createShareUrl:({url:e,title:u})=>`https://api.whatsapp.com/send?text=${f(u)} ${f(e)}`},{name:"Telegram",icon:"telegram.svg",createShareUrl:({url:e,title:u})=>`https://t.me/share/url?url=${f(e)}&text=${f(u)}`},{name:"Pocket",icon:"pocket.svg",createShareUrl:({url:e,title:u})=>`https://getpocket.com/save?url=${f(e)}&title=${f(u)}`},{name:"Email",icon:"email.svg",createShareUrl:({url:e,title:u})=>`mailto:?subject=${f(u)}&body=${f(e)}`},{name:"Copy URL",icon:"copy.svg",onClick:({url:e})=>x(e)},{name:"QR code",icon:"qr-code.svg",onClick:b},{name:"Share via \u2026",icon:"share.svg",onClick:({url:e,title:u})=>navigator.share({url:e,title:u})}],l=!j(),c=document.createElement("div"),a=await s(!1),d,L,E=a.url.length;c.innerHTML=A.replace(/{{urlLength}}/g,E).replace(/{{warnClass}}/g,E>2048?"danger":"warn");let S=c.firstChild;l?S.querySelector("#share-expiry").outerHTML="":S.querySelector("#share-expiry-self-hosted").outerHTML="";let g=S.querySelector("#share-links"),h=S.querySelector("#share-click-to-copy"),T=S.querySelector("#share-url-input"),p=S.querySelector(".share-expiry"),m=p?.querySelector(".share-permanent-url-expiry a"),n=p?.querySelector(".share-short-url-expiry a"),t=e=>{h&&(clearTimeout(M),h.innerHTML=e)};o(a,r,g);let v=async e=>{e?.preventDefault(),t("Generating URL \u2026");try{d=d||await s(!0),o(d,r,g),p?.classList.add("short-url")}catch{t("Failed to generate short URL!")}};return y.addEventListener(m,"click",v),y.addEventListener(n,"click",e=>{e.preventDefault(),o(a,r,g),p?.classList.remove("short-url");let u=B();u.style.display="none",g.style.visibility="visible"}),y.addEventListener(T,"click",function(){x(T?.value),T?.select()}),S};export{It as createShareContainer};
//# sourceMappingURL=share.js.map
