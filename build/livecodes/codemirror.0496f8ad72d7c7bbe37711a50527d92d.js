import{Compartment as b,EditorState as oe}from"@codemirror/state";import{oneDark as ro}from"@codemirror/theme-one-dark";import{EditorView as H,keymap as C}from"@codemirror/view";import{indentWithTab as so,undo as co,redo as ao}from"@codemirror/commands";import{defaultHighlightStyle as lo,syntaxHighlighting as mt,indentUnit as io,HighlightStyle as uo}from"@codemirror/language";import{tags as mo}from"@lezer/highlight";var Se=()=>document.querySelector("#editor-mode");import{keymap as Te,highlightSpecialChars as xe,drawSelection as ke,highlightActiveLine as Tt,dropCursor as xt,rectangularSelection as kt,crosshairCursor as At,lineNumbers as G,highlightActiveLineGutter as bt}from"@codemirror/view";import{EditorState as Ht}from"@codemirror/state";import{defaultHighlightStyle as Ae,syntaxHighlighting as be,indentOnInput as wt,bracketMatching as qt,foldGutter as vt,foldKeymap as It}from"@codemirror/language";import{defaultKeymap as He,history as we,historyKeymap as qe}from"@codemirror/commands";import{searchKeymap as Bt,highlightSelectionMatches as Ct}from"@codemirror/search";import{autocompletion as jt,completionKeymap as Rt,closeBrackets as $,closeBracketsKeymap as Dt}from"@codemirror/autocomplete";import{lintKeymap as Ut}from"@codemirror/lint";import{EditorView as wo}from"@codemirror/view";var ve=(()=>[bt(),xe(),we(),vt(),ke(),xt(),Ht.allowMultipleSelections.of(!0),wt(),be(Ae,{fallback:!0}),qt(),jt(),kt(),At(),Tt(),Ct(),Te.of([...Dt,...He,...Bt,...qe,...It,...Rt,...Ut])])(),Ao=(()=>[xe(),we(),ke(),be(Ae,{fallback:!0}),Te.of([...He,...qe])])();import{LanguageSupport as Pt,StreamLanguage as Nt}from"@codemirror/language";var S=e=>new Pt(Nt.define(e)),y=e=>`./vendor/codemirror/v6.0.1/${e}`,m={core:y("codemirror-core.js"),vue:y("codemirror-lang-vue.js"),json:y("codemirror-lang-json.js"),markdown:y("codemirror-lang-markdown.js"),python:y("codemirror-lang-python.js"),php:y("codemirror-lang-php.js"),cpp:y("codemirror-lang-cpp.js"),sql:y("codemirror-lang-sql.js"),wast:y("codemirror-lang-wast.js"),scss:y("codemirror-lang-scss.js"),coffeescript:y("codemirror-lang-coffeescript.js"),livescript:y("codemirror-lang-livescript.js"),ruby:y("codemirror-lang-ruby.js"),go:y("codemirror-lang-go.js"),perl:y("codemirror-lang-perl.js"),lua:y("codemirror-lang-lua.js"),julia:y("codemirror-lang-julia.js"),scheme:y("codemirror-lang-scheme.js"),tcl:y("codemirror-lang-tcl.js"),less:y("codemirror-lang-less.js"),stylus:y("codemirror-lang-stylus.js")},z={html:async()=>(await import(m.core)).html(),css:async()=>(await import(m.core)).css(),javascript:async()=>(await import(m.core)).javascript(),typescript:async()=>(await import(m.core)).javascript({typescript:!0}),jsx:async()=>(await import(m.core)).javascript({jsx:!0}),tsx:async()=>(await import(m.core)).javascript({jsx:!0,typescript:!0}),vue:async()=>(await import(m.vue)).vue(),json:async()=>(await import(m.json)).json(),markdown:async()=>(await import(m.markdown)).markdown(),python:async()=>(await import(m.python)).python(),php:async()=>(await import(m.php)).php(),cpp:async()=>(await import(m.cpp)).cpp(),sql:async()=>(await import(m.sql)).sql(),wat:async()=>(await import(m.wast)).wast(),scss:async()=>S((await import(m.scss)).sCSS),coffeescript:async()=>S((await import(m.coffeescript)).coffeeScript),livescript:async()=>S((await import(m.livescript)).liveScript),ruby:async()=>S((await import(m.ruby)).ruby),go:async()=>S((await import(m.go)).go),perl:async()=>S((await import(m.perl)).perl),lua:async()=>S((await import(m.lua)).lua),julia:async()=>S((await import(m.julia)).julia),scheme:async()=>S((await import(m.scheme)).scheme),tcl:async()=>S((await import(m.tcl)).tcl),less:async()=>S((await import(m.less)).less),stylus:async()=>S((await import(m.stylus)).stylus)};import{Decoration as W,EditorView as Ft,ViewPlugin as Vt,WidgetType as Ot}from"@codemirror/view";import{getIndentUnit as Be}from"@codemirror/language";import{RangeSet as Gt}from"@codemirror/state";var $t=W.mark({class:"cm-indentation-marker",tagName:"span"}),zt=W.mark({class:"cm-indentation-marker active",tagName:"span"}),K=class extends Ot{constructor(t,o,n){super(),this.numIndent=t,this.indentSize=o,this.activeIndent=n}eq(t){return this.numIndent===t.numIndent&&this.indentSize===t.indentSize&&this.activeIndent===t.activeIndent}toDOM(t){let o=Be(t.state),n=document.createElement("span");n.style.top="0",n.style.left="4px",n.style.position="absolute",n.style.pointerEvents="none";for(let r=0;r<this.numIndent;r++){let l=document.createElement("span");l.className="cm-indentation-marker",l.classList.toggle("active",r===this.activeIndent),l.innerHTML=" ".repeat(o),n.appendChild(l)}return n}};function Ce(e,t,o){let n=0,r=0,l=null;for(let a=0;a<e.length;a++){if(e[a]!==" "&&e[a]!=="	")return r%t===0&&a!==0&&n++,n;(l==="	"||r%t===0)&&(n++,o&&o(a)),e[a]===" "?r++:r=0,l=e[a]}return n}function Kt(e,t){let o=Math.min(e,t),n=Math.max(e,t);return o===0&&n>0?1:o===n&&o>0?o-1:o}function Wt(e,t,o){let n=e.lines,r=t;for(;r<=n;){let{text:l}=e.line(r);if(l.trim().length===0){r++;continue}let a=Ce(l,o);return[r,a]}return[n+1,0]}function Ie(e){let t=Be(e.state),o=new Map,n=[];for(let{from:l,to:a}of e.visibleRanges){let s=l,u=0,d=0,p=0;for(;s<=a;){let f=e.state.doc.lineAt(s),{text:T}=f;if(T.trim().length===0){if(p<f.number){let[h,k]=Wt(e.state.doc,f.number+1,t);p=h,d=k}let L=Kt(u,d);o.set(f.number,L),n.push({from:s,to:s,lineNumber:f.number,create:h=>W.widget({widget:new K(L,t,h)})})}else{let L=[];u=Ce(T,t,h=>L.push(h)),o.set(f.number,L.length),n.push(...L.map((h,k)=>({from:f.from+h,to:f.from+h+1,lineNumber:f.number,create:j=>j===k?zt:$t})))}s=f.to+1}}let r=Jt(e.state,o);return Gt.of(Array.from(n).map(({lineNumber:l,from:a,to:s,create:u})=>{let d=l>=r.start&&l<=r.end?r.activeIndent-1:void 0;return{from:a,to:s,value:u(d)}}),!0)}function Jt(e,t){let o=e.doc.lineAt(e.selection.main.head),n=t.get(o.number),r=o.number,l=t.get(r+1);l&&n!=null&&l>n&&(n=l,r++);let a=t.get(r-1);if(a&&n!=null&&a>n&&(n=a,r--),!n)return{start:-1,end:-1,activeIndent:NaN};let s,u;for(s=r;s>=0;s--){let d=t.get(s-1);if(!d||d<n)break}for(u=r;;u++){let d=t.get(u+1);if(!d||d<n)break}return{start:s,end:u,activeIndent:n}}function Qt(){return Vt.define(e=>({decorations:Ie(e),update(t){(t.docChanged||t.viewportChanged||t.selectionSet)&&(this.decorations=Ie(t.view))}}),{decorations:e=>e.decorations})}var Yt=Ft.baseTheme({".cm-line":{position:"relative"},".cm-indentation-marker":{display:"inline-block"},"&light .cm-indentation-marker":{background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") left repeat-y'},"&light .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEX///+goKD0a5EfAAAADElEQVR4nGNgYGgAAACEAIHJde6SAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEUAAACFhYWZv3sFAAAAAnRSTlMA/1uRIrUAAAAMSURBVHicY2BgaAAAAIQAgcl17pIAAAAASUVORK5CYII=) left repeat-y"}});function J(){return[Qt(),Yt]}import{insertNewlineAndIndent as je,cursorCharLeft as Re,selectCharLeft as De,cursorGroupLeft as _t,selectGroupLeft as Zt,cursorCharRight as Ue,selectCharRight as Pe,cursorGroupRight as Xt,selectGroupRight as en,cursorLineUp as Ne,selectLineUp as Fe,cursorLineDown as Ve,selectLineDown as Oe,cursorLineBoundaryBackward as Ge,selectLineBoundaryBackward as $e,cursorDocStart as ze,selectDocStart as Ke,cursorPageUp as Q,selectPageUp as We,cursorPageDown as Y,selectPageDown as Je,cursorLineBoundaryForward as Qe,selectLineBoundaryForward as Ye,cursorDocEnd as _e,selectDocEnd as Ze,selectAll as tn,deleteCharBackward as _,deleteCharForward as Xe,deleteGroupBackward as et,deleteGroupForward as nn,deleteToLineStart as on,deleteToLineEnd as tt,cursorLineStart as rn,selectLineStart as sn,cursorLineEnd as cn,selectLineEnd as an,splitLine as ln,transposeChars as un,deleteLine as mn,moveLineDown as dn,moveLineUp as pn,copyLineDown as gn,copyLineUp as fn,selectLine as yn,cursorMatchingBracket as En,indentMore as nt,indentLess as ot,lineComment as hn,lineUncomment as Ln,toggleComment as Mn,toggleBlockComment as Sn,undo as Tn,redo as rt,undoSelection as xn}from"@codemirror/commands";import{openSearchPanel as kn,closeSearchPanel as An,selectMatches as bn,replaceAll as Hn,gotoLine as wn,selectNextOccurrence as qn,selectSelectionMatches as vn}from"@codemirror/search";import{foldCode as In,unfoldCode as Bn,foldAll as Cn,unfoldAll as jn}from"@codemirror/language";import{startCompletion as Rn,closeCompletion as Dn,moveCompletionSelection as v,acceptCompletion as st,deleteBracketPair as Un}from"@codemirror/autocomplete";import{openLintPanel as Pn,nextDiagnostic as Nn}from"@codemirror/lint";import{EditorSelection as Fn}from"@codemirror/state";var ct=e=>t=>{let o=e==="down",n=t.state.selection;for(let r of n.ranges)n.addRange(t.moveVertically(r,o));return t.dispatch({selection:n}),!0},Vn=ct("up"),On=ct("down"),Gn=e=>{for(let t of e.state.selection.ranges)if(!t.empty)for(let o=t.from;o<=t.to;){let n=e.state.doc.lineAt(o),r=Math.min(n.to,t.to);Fn.single(r),o=n.to+1}return!1},Z=[{key:"Ctrl-Space",run:Rn},{key:"Escape",run:Dn},{key:"ArrowDown",run:v(!0)},{key:"ArrowUp",run:v(!1)},{key:"PageDown",run:v(!0,"page")},{key:"PageUp",run:v(!1,"page")},{key:"Enter",run:st},{key:"Tab",run:st},{key:"Mod-f",run:kn,scope:"editor search-panel"},{key:"Escape",run:An,scope:"editor search-panel"},{key:"Alt-Enter",run:bn,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:Hn,scope:"editor search-panel"},{key:"Ctrl-g",run:wn},{key:"Mod-d",run:qn,preventDefault:!0},{key:"Shift-Mod-l",run:vn},{key:"Enter",run:je,shift:je},{key:"ArrowLeft",run:Re,shift:De,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:_t,shift:Zt},{key:"ArrowRight",run:Ue,shift:Pe,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Xt,shift:en},{key:"ArrowUp",run:Ne,shift:Fe,preventDefault:!0},{key:"ArrowDown",run:Ve,shift:Oe,preventDefault:!0},{key:"Home",run:Ge,shift:$e},{mac:"Cmd-ArrowLeft",run:Ge,shift:$e},{key:"Mod-Home",run:ze,shift:Ke},{mac:"Cmd-ArrowUp",run:ze,shift:Ke},{key:"PageUp",run:Q,shift:We},{mac:"Ctrl-ArrowUp",run:Q,shift:We},{key:"PageDown",run:Y,shift:Je},{mac:"Ctrl-ArrowDown",run:Y,shift:Je},{key:"End",run:Qe,shift:Ye},{mac:"Cmd-ArrowRight",run:Qe,shift:Ye},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Vn,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:On,preventDefault:!0},{key:"Shift-Alt-i",run:Gn},{key:"Mod-End",run:_e,shift:Ze},{mac:"Cmd-ArrowDown",run:_e,shift:Ze},{key:"Mod-a",run:tn},{key:"Backspace",run:Un},{key:"Backspace",run:_,shift:_},{key:"Delete",run:Xe},{key:"Mod-Backspace",mac:"Alt-Backspace",run:et},{key:"Mod-Delete",mac:"Alt-Delete",run:nn},{mac:"Mod-Backspace",run:on},{mac:"Mod-Delete",run:tt},{mac:"Ctrl-b",run:Re,shift:De,preventDefault:!0},{mac:"Ctrl-f",run:Ue,shift:Pe},{mac:"Ctrl-p",run:Ne,shift:Fe},{mac:"Ctrl-n",run:Ve,shift:Oe},{mac:"Ctrl-a",run:rn,shift:sn},{mac:"Ctrl-e",run:cn,shift:an},{mac:"Ctrl-d",run:Xe},{mac:"Ctrl-h",run:_},{mac:"Ctrl-k",run:tt},{mac:"Ctrl-Alt-h",run:et},{mac:"Ctrl-o",run:ln},{mac:"Ctrl-t",run:un},{mac:"Ctrl-v",run:Y},{mac:"Alt-v",run:Q},{key:"Shift-Mod-k",run:mn},{key:"Alt-ArrowDown",run:dn},{key:"Alt-ArrowUp",run:pn},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:gn},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:fn},{key:"Mod-l",run:yn,preventDefault:!0},{key:"Shift-Mod-\\",run:En},{key:"Tab",run:nt,shift:ot,preventDefault:!0},{key:"Mod-[",run:ot},{key:"Mod-]",run:nt},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:In},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Bn},{key:"Mod-k Mod-0",run:Cn},{key:"Mod-k Mod-j",run:jn},{key:"Mod-k Mod-c",run:hn},{key:"Mod-k Mod-u",run:Ln},{key:"Mod-/",run:Mn},{key:"Shift-Alt-a",run:Sn},{key:"Mod-z",run:Tn,preventDefault:!0},{key:"Mod-y",run:rt,preventDefault:!0},{key:"Mod-Shift-z",run:rt,preventDefault:!0},{key:"Mod-u",run:xn,preventDefault:!0},{key:"Mod-Shift-m",run:Pn},{key:"F8",run:Nn}];import{EditorView as $n,ViewPlugin as zn,Decoration as w,WidgetType as Kn}from"@codemirror/view";import{syntaxTree as Wn}from"@codemirror/language";var te=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkgrey","#a9a9a9"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["goldenrod","#daa520"],["gold","#ffd700"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["grey","#808080"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavenderblush","#fff0f5"],["lavender","#e6e6fa"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgreen","#90ee90"],["lightgrey","#d3d3d3"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]),Jn=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]]);return o},ut=new WeakMap,x=function(e){return e.rgb="RGB",e.hex="HEX",e.named="NAMED",e.hsl="HSL",e}(x||(x={})),Qn=/rgb\(\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*(,\s*0?\.\d+)?\)/,Yn=/hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(,\s*0?\.\d+)?\)/;function at(e){let t=[];for(let o of e.visibleRanges)Wn(e.state).iterate({from:o.from,to:o.to,enter:({type:n,from:r,to:l})=>{if(n.name==="CallExpression"){let a=e.state.doc.sliceString(r,l);if(a.startsWith("rgb")){let s=Qn.exec(a);if(!s)return;let[u,d,p,f,T]=s,L=Zn(d,p,f),h=w.widget({widget:new A({colorType:x.rgb,color:L,from:r,to:l,alpha:T||""}),side:1});t.push(h.range(r));return}if(a.startsWith("hsl")){let s=Yn.exec(a);if(!s)return;let[u,d,p,f,T]=s,L=Xn(d,p,f),h=w.widget({widget:new A({colorType:x.hsl,color:L,from:r,to:l,alpha:T||""}),side:1});t.push(h.range(r));return}}if(n.name==="ColorLiteral"){let[a,s]=_n(e.state.doc.sliceString(r,l)),u=w.widget({widget:new A({colorType:x.hex,color:a,from:r,to:l,alpha:s}),side:1});t.push(u.range(r))}if(n.name==="ValueName"){let a=e.state.doc.sliceString(r,l);if(te.has(a)){let s=te.get(a),u=w.widget({widget:new A({colorType:x.named,color:s,from:r,to:l,alpha:""}),side:1});t.push(u.range(r))}}}});return w.set(t)}function _n(e){return e.length===4?[`#${e[1].repeat(2)}${e[2].repeat(2)}${e[3].repeat(2)}`,""]:e.length===5?[`#${e[1].repeat(2)}${e[2].repeat(2)}${e[3].repeat(2)}`,e[4].repeat(2)]:e.length===9?[`#${e.slice(1,-2)}`,e.slice(-2)]:[e,""]}function X(e){let t;if(e.endsWith("%")){let o=Number(e.slice(0,-1));t=Math.round(o/100*255)}else t=Number(e);return I(t)}function I(e){let t=e.toString(16);return t.length==1?"0"+t:t}function lt(e){let t=e.slice(1,3),o=e.slice(3,5),n=e.slice(5,7);return[parseInt(t,16),parseInt(o,16),parseInt(n,16)]}function Zn(e,t,o){return`#${X(e)}${X(t)}${X(o)}`}function Xn(e,t,o){let n=Number(t)/100,r=Number(o)/100,[l,a,s]=eo(Number(e),n,r);return`#${I(l)}${I(a)}${I(s)}`}function eo(e,t,o){if(t===0){let f=Math.round(o*255);return[f,f,f]}let n;o<.5?n=o*(1+t):n=o+t-o*t;let r=2*o-n;e=e/360;let l=it(e+.333),a=e,s=it(e-.333),u=ee(n,r,l),d=ee(n,r,a),p=ee(n,r,s);return[Math.round(u*255),Math.round(d*255),Math.round(p*255)]}function it(e){return e<0?e+1:e>1?e-1:e}function ee(e,t,o){return 6*o<1?t+(e-t)*6*o:2*o<1?e:3*o<2?t+(e-t)*(.666-o)*6:t}function to(e,t,o){let n=e/255,r=t/255,l=o/255,a=Math.min(n,r,l),s=Math.max(n,r,l),u=(s+a)/2;if(s===a)return[0,0,u];let d;u<=.5?d=(s-a)/(s+a):d=(s-a)/(2-s-a);let p;for(s===n?p=(r-l)/(s-a):r===s?p=2+(l-n)/(s-a):p=4+(n-r)/(s-a),p=Math.round(p*60);p<0;)p+=360;return[p,d,u]}var B="cm-css-color-picker-wrapper",A=class extends Kn{constructor(t){var{color:o}=t,n=Jn(t,["color"]);super(),this.state=n,this.color=o}eq(t){return t.state.colorType===this.state.colorType&&t.color===this.color&&t.state.from===this.state.from&&t.state.to===this.state.to&&t.state.alpha===this.state.alpha}toDOM(){let t=document.createElement("input");ut.set(t,this.state),t.type="color",t.value=this.color;let o=document.createElement("span");return o.appendChild(t),o.className=B,o}ignoreEvent(){return!1}},no=$n.baseTheme({[`.${B}`]:{display:"inline-block",outline:"1px solid #eee",marginRight:"0.6ch",height:"1em",width:"1em",transform:"translateY(1px)"},[`.${B} input[type="color"]`]:{cursor:"pointer",height:"100%",width:"100%",padding:0,border:"none","&::-webkit-color-swatch-wrapper":{padding:0},"&::-webkit-color-swatch":{border:"none"},"&::-moz-color-swatch":{border:"none"}}}),oo=zn.fromClass(class{constructor(t){this.decorations=at(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=at(t.view))}},{decorations:e=>e.decorations,eventHandlers:{change:(e,t)=>{let o=e.target;if(o.nodeName!=="INPUT"||!o.parentElement||!o.parentElement.classList.contains(B))return!1;let n=ut.get(o),r=o.value+n.alpha;if(n.colorType===x.rgb)r=`rgb(${lt(o.value).join(", ")}${n.alpha})`;else if(n.colorType===x.named)for(let[l,a]of te.entries())a===o.value&&(r=l);else if(n.colorType===x.hsl){let[l,a,s]=lt(o.value),[u,d,p]=to(l,a,s);r=`hsl(${u}, ${Math.round(d*100)}%, ${Math.round(p*100)}%${n.alpha})`}return t.dispatch({changes:{from:n.from,to:n.to,insert:r}}),!0}}}),ne=[oo,no];var mr=async e=>{let{container:t,readonly:o,isEmbed:n,editorId:r,getFormatterConfig:l,getFontFamily:a}=e,s={...e};if(!t)throw new Error("editor container not found");let u=async c=>z[c]?.()||z.html?.(),d=c=>["vue","vue3","vue2"].includes(c)?"vue":e.mapLanguage?.(c)||c,p=e.language,f=d(p),T=await u(f),L=e.theme,h=[],k=[],j=c=>{c.docChanged&&k.forEach(i=>i(c))},R,D,U,re=async c=>{let i={vim:"./vendor/codemirror/v6.0.1/codemirror-vim.js",emacs:"./vendor/codemirror/v6.0.1/codemirror-emacs.js",emmet:"./vendor/codemirror/v6.0.1/codemirror-emmet.js"};R=c.editorMode==="vim"?(await import(i.vim)).vim:void 0,D=c.editorMode==="emacs"?(await import(i.emacs)).emacs:void 0,U=c.emmet?(await import(i.emmet)).emmet:void 0};await re(e);let se=new b,ce=new b,ae=new b,P=H.editable.of(!1),le=new b,ie=new b,ue=new b,dt=uo.define([{tag:mo.comment,fontStyle:"italic"}]),me=c=>{let i=(c.fontSize??s.fontSize)||(n?12:14),E=a(c.fontFamily??s.fontFamily),M=c.tabSize??s.tabSize,O=c.useTabs??s.useTabs,q=c.wordWrap??s.wordWrap,St=c.emmet??s.emmet,Me=c.editorMode??s.editorMode;return[oe.tabSize.of(M),io.of(O?"	":" ".repeat(M)),...q?[H.lineWrapping]:[],...Me==="vim"&&R?[R()]:Me==="emacs"&&D?[D()]:[],...St&&U?[U]:[],H.theme({"&":{height:"100%",fontSize:i+"px"},".cm-scroller":{overflow:"auto",fontFamily:E}})]},de={dark:ro,light:[mt(lo)]},pe=()=>{let c=[se.of(T),H.updateListener.of(j),ae.of(de[L]),mt(dt),le.of(me({})),ce.of(C.of(h)),ie.of(s.lineNumbers?G():[]),ue.of(s.closeBrackets?$():[]),ve,o?P:[],C.of([so]),C.of(Z),J(),ne],i=[P,...c],E=[P,...c],M=[...c];return r==="console"?M:r==="compiled"?E:e.mode==="codeblock"?i:c},ge=async c=>{let i=Se(),E=M=>{i&&(i.textContent=M)};c||E(""),c==="vim"&&E("Vim"),c==="emacs"&&E("Emacs")},g=new H({state:oe.create({extensions:pe(),doc:e.value}),parent:t});ge(e.editorMode);let pt=()=>r,fe=()=>g.state.doc.toString(),N=(c="",i=!0)=>{i?g.setState(oe.create({doc:c,extensions:pe()})):g.dispatch({changes:{from:0,to:g.state.doc.length,insert:c}})},ye=()=>g.focus(),gt=()=>p,ft=(c,i)=>{p=c,f=d(p),u(f).then(E=>{T=E,g.dispatch({effects:se.reconfigure(T)})}),i!=null&&N(i)},yt=c=>{k.push(c)},Ee={CtrlEnter:"Ctrl-Enter",ShiftEnter:"Shift-Enter",Enter:"Enter",UpArrow:"ArrowUp",DownArrow:"ArrowDown",ShiftAltF:"Shift-Alt-f"},F=(c,i,E)=>{h.push({key:i,run(){return E(),!0}}),g.dispatch({effects:ce.reconfigure(C.of(h))})},V,Et=c=>{c&&(V=c,F("format",Ee.ShiftAltF,async()=>{await he(),ye()}))},he=async()=>{if(!V)return;let c=g.state.selection.main.to,i=fe(),E=await V(i,c,l());N(E.formatted,!1);let M=E.cursorOffset>=0?E.cursorOffset:0;g.dispatch({selection:{anchor:M}})},ht=c=>{L=c,g.dispatch({effects:ae.reconfigure(de[L])})},Lt=c=>{s={...c},re(s).then(()=>{g.dispatch({effects:[le.reconfigure(me(s)),ie.reconfigure(s.lineNumbers?G():[]),ue.reconfigure(s.closeBrackets?$():[])]}),ge(s.editorMode)})},Mt=()=>{co({state:g.state,dispatch:g.dispatch})},Le=()=>{ao({state:g.state,dispatch:g.dispatch})};return F("redo","Mod-Shift-z",Le),{getValue:fe,setValue:N,getLanguage:gt,setLanguage:ft,getEditorId:pt,focus:ye,getPosition:()=>{let c=g.state.selection.asSingle().ranges[0].from,i=g.state.doc.lineAt(c),E=i.number,M=c-i.from+1;return{lineNumber:E,column:M}},setPosition:({lineNumber:c,column:i=0})=>{let E=g.state.doc.lines>c?c:g.state.doc.lines,M=g.state.doc.line(E),O=M.length>i?i:M.length,q=M.from+O;g.dispatch({selection:{anchor:q},effects:[H.scrollIntoView(q,{x:"center",y:"center"})]})},onContentChanged:yt,keyCodes:Ee,addKeyBinding:F,changeSettings:Lt,registerFormatter:Et,format:he,isReadonly:o,setTheme:ht,undo:Mt,redo:Le,destroy:()=>{k.length=0,h.length=0,g.destroy(),t.innerHTML=""},codemirror:g}};export{mr as createEditor};
//# sourceMappingURL=codemirror.js.map
