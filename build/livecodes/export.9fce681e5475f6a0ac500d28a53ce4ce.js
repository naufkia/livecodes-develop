var X=Object.create;var O=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var tt=Object.getOwnPropertyNames;var et=Object.getPrototypeOf,nt=Object.prototype.hasOwnProperty;var st=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var rt=(t,e,o,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let p of tt(e))!nt.call(t,p)&&p!==o&&O(t,p,{get:()=>e[p],enumerable:!(c=Y(e,p))||c.enumerable});return t};var ot=(t,e,o)=>(o=t!=null?X(et(t)):{},rt(e||!t||!t.__esModule?O(o,"default",{value:t,enumerable:!0}):o,t));var q=st((Kt,C)=>{var F=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function p(n,s){if(!c[n]){c[n]={};for(var l=0;l<n.length;l++)c[n][n.charAt(l)]=l}return c[n][s]}var m={compressToBase64:function(n){if(n==null)return"";var s=m._compress(n,6,function(l){return e.charAt(l)});switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(n){return n==null?"":n==""?null:m._decompress(n.length,32,function(s){return p(e,n.charAt(s))})},compressToUTF16:function(n){return n==null?"":m._compress(n,15,function(s){return t(s+32)})+" "},decompressFromUTF16:function(n){return n==null?"":n==""?null:m._decompress(n.length,16384,function(s){return n.charCodeAt(s)-32})},compressToUint8Array:function(n){for(var s=m.compress(n),l=new Uint8Array(s.length*2),r=0,d=s.length;r<d;r++){var h=s.charCodeAt(r);l[r*2]=h>>>8,l[r*2+1]=h%256}return l},decompressFromUint8Array:function(n){if(n==null)return m.decompress(n);for(var s=new Array(n.length/2),l=0,r=s.length;l<r;l++)s[l]=n[l*2]*256+n[l*2+1];var d=[];return s.forEach(function(h){d.push(t(h))}),m.decompress(d.join(""))},compressToEncodedURIComponent:function(n){return n==null?"":m._compress(n,6,function(s){return o.charAt(s)})},decompressFromEncodedURIComponent:function(n){return n==null?"":n==""?null:(n=n.replace(/ /g,"+"),m._decompress(n.length,32,function(s){return p(o,n.charAt(s))}))},compress:function(n){return m._compress(n,16,function(s){return t(s)})},_compress:function(n,s,l){if(n==null)return"";var r,d,h={},b={},j="",w="",y="",x=2,U=3,g=2,f=[],i=0,a=0,v;for(v=0;v<n.length;v+=1)if(j=n.charAt(v),Object.prototype.hasOwnProperty.call(h,j)||(h[j]=U++,b[j]=!0),w=y+j,Object.prototype.hasOwnProperty.call(h,w))y=w;else{if(Object.prototype.hasOwnProperty.call(b,y)){if(y.charCodeAt(0)<256){for(r=0;r<g;r++)i=i<<1,a==s-1?(a=0,f.push(l(i)),i=0):a++;for(d=y.charCodeAt(0),r=0;r<8;r++)i=i<<1|d&1,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=d>>1}else{for(d=1,r=0;r<g;r++)i=i<<1|d,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=0;for(d=y.charCodeAt(0),r=0;r<16;r++)i=i<<1|d&1,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=d>>1}x--,x==0&&(x=Math.pow(2,g),g++),delete b[y]}else for(d=h[y],r=0;r<g;r++)i=i<<1|d&1,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=d>>1;x--,x==0&&(x=Math.pow(2,g),g++),h[w]=U++,y=String(j)}if(y!==""){if(Object.prototype.hasOwnProperty.call(b,y)){if(y.charCodeAt(0)<256){for(r=0;r<g;r++)i=i<<1,a==s-1?(a=0,f.push(l(i)),i=0):a++;for(d=y.charCodeAt(0),r=0;r<8;r++)i=i<<1|d&1,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=d>>1}else{for(d=1,r=0;r<g;r++)i=i<<1|d,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=0;for(d=y.charCodeAt(0),r=0;r<16;r++)i=i<<1|d&1,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=d>>1}x--,x==0&&(x=Math.pow(2,g),g++),delete b[y]}else for(d=h[y],r=0;r<g;r++)i=i<<1|d&1,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=d>>1;x--,x==0&&(x=Math.pow(2,g),g++)}for(d=2,r=0;r<g;r++)i=i<<1|d&1,a==s-1?(a=0,f.push(l(i)),i=0):a++,d=d>>1;for(;;)if(i=i<<1,a==s-1){f.push(l(i));break}else a++;return f.join("")},decompress:function(n){return n==null?"":n==""?null:m._decompress(n.length,32768,function(s){return n.charCodeAt(s)})},_decompress:function(n,s,l){var r=[],d,h=4,b=4,j=3,w="",y=[],x,U,g,f,i,a,v,u={val:l(0),position:s,index:1};for(x=0;x<3;x+=1)r[x]=x;for(g=0,i=Math.pow(2,2),a=1;a!=i;)f=u.val&u.position,u.position>>=1,u.position==0&&(u.position=s,u.val=l(u.index++)),g|=(f>0?1:0)*a,a<<=1;switch(d=g){case 0:for(g=0,i=Math.pow(2,8),a=1;a!=i;)f=u.val&u.position,u.position>>=1,u.position==0&&(u.position=s,u.val=l(u.index++)),g|=(f>0?1:0)*a,a<<=1;v=t(g);break;case 1:for(g=0,i=Math.pow(2,16),a=1;a!=i;)f=u.val&u.position,u.position>>=1,u.position==0&&(u.position=s,u.val=l(u.index++)),g|=(f>0?1:0)*a,a<<=1;v=t(g);break;case 2:return""}for(r[3]=v,U=v,y.push(v);;){if(u.index>n)return"";for(g=0,i=Math.pow(2,j),a=1;a!=i;)f=u.val&u.position,u.position>>=1,u.position==0&&(u.position=s,u.val=l(u.index++)),g|=(f>0?1:0)*a,a<<=1;switch(v=g){case 0:for(g=0,i=Math.pow(2,8),a=1;a!=i;)f=u.val&u.position,u.position>>=1,u.position==0&&(u.position=s,u.val=l(u.index++)),g|=(f>0?1:0)*a,a<<=1;r[b++]=t(g),v=b-1,h--;break;case 1:for(g=0,i=Math.pow(2,16),a=1;a!=i;)f=u.val&u.position,u.position>>=1,u.position==0&&(u.position=s,u.val=l(u.index++)),g|=(f>0?1:0)*a,a<<=1;r[b++]=t(g),v=b-1,h--;break;case 2:return y.join("")}if(h==0&&(h=Math.pow(2,j),j++),r[v])w=r[v];else if(v===b)w=U+U.charAt(0);else return null;y.push(w),r[b++]=U+w.charAt(0),h--,U=w,h==0&&(h=Math.pow(2,j),j++)}}};return m}();typeof define=="function"&&define.amd?define(function(){return F}):typeof C<"u"&&C!=null&&(C.exports=F)});var S=(t=location.origin)=>Boolean(t&&(t.endsWith("livecodes.io")||t.endsWith("livecodes.pages.dev")||t.endsWith("localpen.io")||t.endsWith("localpen.pages.dev")||t.startsWith("http://127.0.0.1")||t.startsWith("http://localhost")));var $=t=>t.replace(/<\/script>/g,"<\\/script>");var I=(t,e="_")=>t.replace(/[\W]+/g,e);var k=(t,e,o)=>{let c=document.createElement("a");c.style.display="none",c.href=o,c.download=I(t)+"."+e,c.click(),c.remove()};var T=t=>t.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1");var R="https://cdn.skypack.dev/-/jszip@v3.7.1-quihaZrSeNyrwABoIb7Z/dist=es2020,mode=imports,min/optimized/jszip.js";var _=ot(q());var B={getModuleUrl:(t,{isModule:e=!0,defaultCDN:o="jspm"}={})=>{let c=m=>{let n=e&&m.startsWith("unpkg:")?"?module":"";for(let s of ct){let[l,r]=s;if(l.test(m))return m.replace(l,r)+n}return null},p=c(t)||c(o+":"+t);return p||(e?"https://jspm.dev/"+t:"https://cdn.jsdelivr.net/npm/"+t)},getModuleInfoUrl:t=>`https://api.npms.io/v2/search?q=${t}&size=1`},ct=[[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(jsdelivr.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(esm.run:)(.+)/i,"https://esm.run/$2"],[/^(esm.sh:)(.+)/i,"https://esm.sh/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(github:)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://raw.githack.com/$2/$3/$4"],[/^(github:)([^\/]+\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://raw.githack.com/$2/$3"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:)([^\/]+\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://raw.githack.com/$2/$3"]];var W="https://dpaste.com/",pt="https://dpaste.com/api/v2/",z="https://api2.livecodes.io/share",N={getProject:async t=>{try{let e=await fetch(W+t+".txt");return e.ok?JSON.parse(await e.text()):{}}catch{return{}}},shareProject:async t=>{try{let e=await fetch(pt,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":"LiveCodes / https://livecodes.io/"},body:`content=${encodeURIComponent(JSON.stringify(t))}&title=${encodeURIComponent(t.title||"")}&syntax=json&expiry_days=365`});return e.ok?(await e.text()).replace(W,""):""}catch{return""}}},lt={getProject:async t=>{if(t.length<11)return N.getProject(t);if(!S())return{};try{let e=await fetch(z+"?id="+t);return e.ok?JSON.parse(await e.text()):{}}catch{return{}}},shareProject:async t=>{if(!S())return"";try{let e=await fetch(z,{method:"POST",mode:"cors",body:JSON.stringify(t)});return e.ok?e.text():""}catch{return""}}},we=S()?lt:N;var P=/(import\s+?(?:(?:(?:[\w*\s{},\$]*)\s+from\s+?)|))((?:".*?")|(?:'.*?'))([\s]*?(?:;|$|))/g,dt=/(import\s*?\(\s*?((?:".*?")|(?:'.*?'))\s*?\))/g,mt=t=>[...T(t).matchAll(new RegExp(P)),...T(t).matchAll(new RegExp(dt))].map(e=>e[2].replace(/"/g,"").replace(/'/g,"")),ut=t=>!t.startsWith("https://")&&!t.startsWith("http://")&&!t.startsWith(".")&&!t.startsWith("/")&&!t.startsWith("data:")&&!t.startsWith("blob:"),gt=(t,e)=>mt(t).map(o=>{if(ut(o)){let c=Object.keys(e.imports).find(p=>p===o||o.startsWith(p+"/"));return c?{[c]:e.imports[c]}:{[o]:B.getModuleUrl(o,{defaultCDN:e?.customSettings?.defaultCDN})}}else return{}}).reduce((o,c)=>({...o,...c}),{});var D=(t,e)=>{let o=gt(t,e);return t.replace(new RegExp(P),c=>{let p=c.replace(new RegExp(P),"$2").replace(/"/g,"").replace(/'/g,""),m=Object.keys(o).find(n=>n===p||p.startsWith(n+"/"));return m?c.replace(m,o[m]):c})};var E=(t,{getLanguageExtension:e})=>{let o={markup:"index",style:"style",script:"script"},c=Object.keys(o).reduce((s,l)=>{let r=o[l],d=t[l].language,h=e?.(d)||"md",b=t[l].content||"";return{...s,...b?{[r+"."+h]:{content:b}}:{}}},{}),p=t.stylesheets.length>0?{styles:{content:t.stylesheets.map(s=>`<link rel="stylesheet" href="${s}" />`).join(`
`)}}:void 0,m=t.scripts.length>0?{scripts:{content:t.scripts.map(s=>`<script src="${s}"><\/script>`).join(`
`)}}:void 0,n=t.tests?.content?{["script.spec."+e?.(t.tests?.language)||"ts"]:{content:t.tests?.content}}:void 0;return{...c,...p,...m,...n}},M=(t,e,o,c=!0)=>{let p=c?"https://gist.github.com/":"https://github.com/",m=e?e.username?"by ["+e.displayName+"]("+p+e.username+")":"by "+e.displayName:"",n=o?`[project](https://livecodes.io/?x=${o})`:"project";return{[I(t.title)+".md"]:{content:`# ${t.title}
A ${n} created ${m} on [LiveCodes](https://livecodes.io).`}}},L=({baseUrl:t,editorId:e,config:o,compiled:c,supportedLanguages:p,getLanguageCompiler:m})=>{if(p[e].includes(o[e].language))return[];let n=m?.(o[e].language)?.scripts,s=o[e].language==="python"?o[e].content||"":c[e];return(typeof n=="function"?n({compiled:s,baseUrl:t,config:o}):n)?.filter(r=>r.startsWith("https://"))||[]},A=({editorId:t,config:e,compiled:o,supportedLanguages:c,getLanguageCompiler:p})=>{let m=["javascript","jsx","tsx",...c.script].includes(e.script.language),n={markup:["html",...c.markup].includes(e.markup.language)?e.markup.content:o.markup,style:["css",...c.style].includes(e.style.language)?e.style.content:o.style,script:e.script.language==="php"?e.script.content?.replace(/<\?php/g,"")||"":e.script.language==="python"?e.script.content:D((m?e.script.content:o.script)||"",e)},s=p?.(e.script.language)?.scriptType;if(!m&&s&&s!=="module"){if(t==="markup")return n.markup+`
<script type="${s}">
${$(n.script||"")}
<\/script>
`;if(t==="script")return e.script.language==="python"?'window.addEventListener("load", () => {brython()});':""}return n[t]||""};var J=(t,{baseUrl:e,compiled:o,deps:c})=>{let p=document.createElement("form");p.action="https://codepen.io/pen/define",p.method="POST",p.target="_blank",p.style.display="none";let m=document.createElement("input");m.name="data";let n={markup:["markdown","haml"],style:["less","scss","sass","stylus"],script:["babel","typescript","coffeescript","livescript"]},s=r=>A({editorId:r,config:t,compiled:o,supportedLanguages:n,...c}),l=r=>L({baseUrl:e,editorId:r,config:t,compiled:o,supportedLanguages:n,...c});m.value=JSON.stringify({title:t.title,desciption:t.description,tags:t.tags,html:s("markup"),html_pre_processor:n.markup.includes(t.markup.language)?t.markup.language:"none",css:s("style"),css_pre_processor:n.style.includes(t.style.language)?t.style.language:"none",css_starter:t.cssPreset==="normalize.css"?"normalize":t.cssPreset==="reset-css"?"reset":"neither",css_prefix:t.processors.includes("autoprefixer")?"autoprefixer":"neither",js:s("script"),js_pre_processor:n.script.includes(t.script.language)?t.script.language:t.script.language==="jsx"?"babel":t.script.language==="tsx"?"typescript":"none",html_classes:t.customSettings.htmlClasses||"",head:t.customSettings.head||"",css_external:t.stylesheets.join(";"),js_external:[...t.scripts,...l("markup"),...l("style"),...l("script")].join(";")}),p.appendChild(m),document.body.appendChild(p),p.submit(),p.remove()};var K=async(t,{user:e,deps:o})=>{if(!e)return;let c=ft(t,e,o),m=await(await H(t,e,c)).json();if(m.id){let n=M(t,e,m.html_url);await H(t,e,n,m.id),window.open("https://gist.github.com/"+m.id)}},ft=(t,e,o)=>{let c=M(t,e),p=E(t,o);return{...c,...p}},H=(t,e,o,c)=>{let p={accept:"application/vnd.github.v3+json",description:t.title,files:o,public:!0},m="https://api.github.com/gists";return c&&(m+="/"+c),fetch(m,{method:c?"PATCH":"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token "+e.token},body:JSON.stringify(p)})};var G=(t,e)=>{let o=t.title,c="html",p="data:text/html;charset=utf-8,"+encodeURIComponent(e);k(o,c,p)};var Z=(t,{baseUrl:e,compiled:o,deps:c})=>{let p=document.createElement("form");p.action="https://jsfiddle.net/api/post/library/pure/",p.method="POST",p.target="_blank",p.style.display="none";let m={markup:["haml"],style:["scss","sass"],script:["babel","typescript","coffeescript"]},n=r=>A({editorId:r,config:t,compiled:o,supportedLanguages:m,...c}),s=r=>L({baseUrl:e,editorId:r,config:t,compiled:o,supportedLanguages:m,...c}),l={title:t.title,description:t.description||"",html:n("markup"),css:n("style"),css_panel:t.style.language==="scss"?"1":"0",js:n("script"),js_panel:t.script.language==="typescript"?"4":t.script.language==="jsx"?"3":t.script.language==="coffeescript"?"5":"0",resources:[...t.stylesheets,...t.scripts,...s("markup"),...s("style"),...s("script")].join(",")};Object.keys(l).forEach(r=>{let d=document.createElement("input");d.name=r,d.value=l[r],p.appendChild(d)}),document.body.appendChild(p),p.submit(),p.remove()};var Q=t=>{let e=t.title,o="json",c="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2));k(e,o,c)};var V=async(t,{html:e,deps:o},c)=>{window.JSZip||(window.JSZip=(await import(R)).default);let p=new window.JSZip,m=E(t,o);Object.keys(m).forEach(d=>{p.file(d,m[d]?.content)}),p.file("result.html",e),p.file("livecodes.json",JSON.stringify(t,null,2));let n=await p.generateAsync({type:"base64"}),s=t.title,l="zip",r="data:application/zip;base64,"+encodeURIComponent(n);k(s,l,r)};var ln=(t,e,o,c)=>{({json:Q,src:V,html:G,codepen:J,jsfiddle:Z,githubGist:K})[o](t,c,e)};export{ln as exportConfig};
//# sourceMappingURL=export.js.map
