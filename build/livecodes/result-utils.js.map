{
  "version": 3,
  "sources": ["../../src/livecodes/result/utils.ts", "../../src/livecodes/result/result-utils.ts"],
  "sourcesContent": ["// modified from https://github.com/alexindigo/precise-typeof/blob/master/index.js\nexport const typeOf = (obj: any) => {\n  function isElement(o: any) {\n    return typeof HTMLElement === 'object'\n      ? o instanceof HTMLElement\n      : o &&\n          typeof o === 'object' &&\n          o !== null &&\n          o.nodeType === 1 &&\n          typeof o.nodeName === 'string';\n  }\n  function isNode(o: any) {\n    return typeof Node === 'object'\n      ? o instanceof Node\n      : o &&\n          typeof o === 'object' &&\n          typeof o.nodeType === 'number' &&\n          typeof o.nodeName === 'string';\n  }\n  function isDocument(o: any) {\n    return Object.prototype.toString.call(o) === '[object HTMLDocument]';\n  }\n  function isWindow(o: any) {\n    return Object.prototype.toString.call(o) === '[object Window]';\n  }\n\n  const stamp: string = Object.prototype.toString.call(obj);\n\n  if (obj === undefined) return 'undefined';\n  if (obj === null) return 'null';\n\n  if (isWindow(obj)) return 'window';\n  if (isDocument(obj)) return 'document';\n  if (isElement(obj)) return 'element';\n  if (isNode(obj)) return 'node';\n\n  if (\n    obj.constructor &&\n    typeof obj.constructor.isBuffer === 'function' &&\n    obj.constructor.isBuffer(obj)\n  ) {\n    return 'buffer';\n  }\n\n  if (typeof window === 'object' && obj === window) return 'window';\n  if (typeof global === 'object' && obj === global) return 'global';\n\n  if (typeof obj === 'number' && isNaN(obj)) return 'nan';\n  if (typeof obj === 'object' && stamp === '[object Number]' && isNaN(obj)) return 'nan';\n\n  if (typeof obj === 'object' && stamp.substr(-6) === 'Event]') return 'event';\n  if (stamp.substr(0, 12) === '[object HTML') return 'element';\n  if (stamp.substr(0, 12) === '[object Node') return 'node';\n\n  // last resort\n  const type = stamp.match(/\\[object\\s*([^\\]]+)\\]/);\n  if (type) return type[1].toLowerCase();\n\n  return 'object';\n};\n\nfunction consoleArgs(args: any[]): Array<{ type: string; content: any }> {\n  return args.map((arg) => {\n    switch (typeOf(arg)) {\n      case 'window':\n      case 'function':\n      case 'date':\n      case 'symbol':\n        return { type: typeOf(arg), content: arg.toString() };\n      case 'document':\n        return { type: typeOf(arg), content: arg.documentElement.outerHTML };\n      case 'element':\n        return { type: typeOf(arg), content: arg.outerHTML };\n      case 'node':\n        return { type: typeOf(arg), content: arg.textContent };\n      case 'array':\n        return { type: typeOf(arg), content: arg.map((x: unknown) => consoleArgs([x])[0].content) };\n      case 'object':\n        return {\n          type: typeOf(arg),\n          content: Object.keys(arg).reduce(\n            (acc, key) => ({ ...acc, [key]: consoleArgs([arg[key]])[0].content }),\n            {},\n          ),\n        };\n      case 'error':\n        return {\n          type: typeOf(arg),\n          content: arg.constructor.name + ': ' + arg.message,\n        };\n    }\n    return { type: 'other', content: arg };\n  });\n}\n\nexport const proxyConsole = () => {\n  window.console = new Proxy(console, {\n    get(target, method) {\n      return function (...args: any[]) {\n        if (!(method in target)) {\n          const msg = `Uncaught TypeError: console.${String(method)} is not a function`;\n          target.error(msg);\n          parent.postMessage({ type: 'console', method: 'error', args: consoleArgs([msg]) }, '*');\n          return;\n        }\n        (target[method as keyof typeof console] as any)(...args);\n        parent.postMessage({ type: 'console', method, args: consoleArgs(args) }, '*');\n      };\n    },\n  });\n\n  window.addEventListener('error', (error) => {\n    parent.postMessage(\n      {\n        type: 'console',\n        method: 'error',\n        args: consoleArgs([error.message]),\n      },\n      '*',\n    );\n  });\n};\n\nexport const handleEval = () => {\n  window.addEventListener('message', (event) => {\n    if (event.data.console) {\n      const evalCode = () => {\n        try {\n          return {\n            type: 'console',\n            method: 'output',\n            // eslint-disable-next-line no-eval\n            args: consoleArgs([window.eval(event.data.console)]),\n          };\n        } catch (error) {\n          return { type: 'console', method: 'error', args: consoleArgs([error]) };\n        }\n      };\n      parent.postMessage(evalCode(), '*');\n    }\n  });\n};\n\nexport const handleResize = () => {\n  window.addEventListener('resize', () => {\n    parent.postMessage(\n      {\n        type: 'resize',\n        sizes: {\n          width: window.innerWidth,\n          height: window.innerHeight,\n        },\n      },\n      '*',\n    );\n  });\n};\n", "import { handleEval, handleResize, proxyConsole } from './utils';\n\n(window as any).livecodes = (window as any).livecodes || {};\nproxyConsole();\nhandleEval();\nhandleResize();\n\nwindow.addEventListener('message', function (event) {\n  if (event.data.styles) {\n    const styles = document.querySelector('#__livecodes_styles__');\n    if (!styles) return;\n    styles.innerHTML = event.data.styles;\n  }\n  if (event.data.flush) {\n    document.body.innerHTML = '';\n  } else {\n    parent.postMessage({ type: 'loading', payload: false }, '*');\n  }\n});\n\nwindow.addEventListener('load', () => {\n  parent.postMessage({ type: 'loading', payload: false }, '*');\n});\n"],
  "mappings": "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",
  "names": ["typeOf", "obj", "isElement", "o", "isNode", "isDocument", "isWindow", "stamp", "type", "consoleArgs", "args", "arg", "x", "acc", "key", "proxyConsole", "target", "method", "msg", "error", "handleEval", "event", "evalCode", "handleResize", "proxyConsole", "handleEval", "handleResize", "event", "styles"]
}
