!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).snackbar={})}(this,function(t){"use strict";function e(){}var i={left:[],center:[],right:[]},o={left:!0,center:!0,right:!0},n={light:{backgroundColor:"#fff",textColor:"#000",actionColor:"#008000"},dark:{}},r=function(t,e){var o=this;void 0===e&&(e={});var r=e.timeout;void 0===r&&(r=0);var s=e.actions;void 0===s&&(s=[{text:"dismiss",callback:function(){return o.destroy()}}]);var a=e.position;void 0===a&&(a="center");var c=e.theme;void 0===c&&(c="dark");var u=e.maxStack;void 0===u&&(u=3),this.message=t,this.options={timeout:r,actions:s,position:a,maxStack:u,theme:"string"==typeof c?n[c]:c},this.wrapper=this.getWrapper(this.options.position),this.insert(),i[this.options.position].push(this),this.stack()},s={theme:{configurable:!0}};s.theme.get=function(){return this.options.theme},r.prototype.getWrapper=function(t){var e=document.querySelector(".snackbars-"+t);return e||((e=document.createElement("div")).className="snackbars snackbars-"+t,document.body.appendChild(e)),e},r.prototype.insert=function(){var t=this,e=document.createElement("div");e.className="snackbar",e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-hidden","false");var i=this.theme,o=i.backgroundColor,n=i.textColor,r=i.boxShadow,s=i.actionColor,a=document.createElement("div");a.className="snackbar--container",o&&(a.style.backgroundColor=o),n&&(a.style.color=n),r&&(a.style.boxShadow=r),e.appendChild(a);var c=document.createElement("div");if(c.className="snackbar--text","string"==typeof this.message?c.textContent=this.message:c.appendChild(this.message),a.appendChild(c),this.options.actions)for(var u=function(){var e=p[l],i=e.style,o=e.text,n=e.callback,r=document.createElement("button");r.className="snackbar--button",r.innerHTML=o,s&&(r.style.color=s),i&&Object.keys(i).forEach(function(t){r.style[t]=i[t]}),r.addEventListener("click",function(){t.stopTimer(),n?n(r,t):t.destroy()}),a.appendChild(r)},l=0,p=t.options.actions;l<p.length;l+=1)u();this.startTimer(),e.addEventListener("mouseenter",function(){t.expand()}),e.addEventListener("mouseleave",function(){t.stack()}),this.el=e,this.wrapper.appendChild(e)},r.prototype.stack=function(){var t=this;o[this.options.position]=!0;var e=i[this.options.position],n=e.length-1;e.forEach(function(e,i){e.startTimer();var o=e.el;if(o){o.style.transform="translate3d(0, -"+15*(n-i)+"px, -"+(n-i)+"px) scale("+(1-.05*(n-i))+")";var r=n-i>=t.options.maxStack;t.toggleVisibility(o,r)}})},r.prototype.expand=function(){var t=this;o[this.options.position]=!1;var e=i[this.options.position],n=e.length-1;e.forEach(function(e,i){e.stopTimer();var o=e.el;if(o){o.style.transform="translate3d(0, -"+(n-i)*o.clientHeight+"px, 0) scale(1)";var r=n-i>=t.options.maxStack;t.toggleVisibility(o,r)}})},r.prototype.toggleVisibility=function(t,e){e?(this.visibilityTimeoutId=window.setTimeout(function(){t.style.visibility="hidden"},300),t.style.opacity="0"):(this.visibilityTimeoutId&&(clearTimeout(this.visibilityTimeoutId),this.visibilityTimeoutId=void 0),t.style.opacity="1",t.style.visibility="visible")},r.prototype.destroy=function(){var t=this;return function(t,e,i){if(i)return e?e(t()):t();try{var o=Promise.resolve(t());return e?o.then(e):o}catch(t){return Promise.reject(t)}}(function(){var n=t.el,r=t.wrapper;return function(t){var i=t();if(i&&i.then)return i.then(e)}(function(){if(n)return n.setAttribute("aria-hidden","true"),e=new Promise(function(t){var e=function(t){for(var e={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"Animationend",WebkitAnimation:"webkitAnimationEnd"},i=0,o=Object.keys(e);i<o.length;i+=1){var n=o[i];if(void 0!==t.style[n])return e[n]}return}(n);e?n.addEventListener(e,function(){return t()}):t()}),s=function(){r.removeChild(n);for(var e=i[t.options.position],s=void 0,a=0;a<e.length;a++)if(e[a].el===n){s=a;break}void 0!==s&&e.splice(s,1),o[t.options.position]?t.stack():t.expand()},a?s?s(e):e:(e&&e.then||(e=Promise.resolve(e)),s?e.then(s):e);var e,s,a})})},r.prototype.startTimer=function(){var t=this;this.options.timeout&&!this.timeoutId&&(this.timeoutId=self.setTimeout(function(){return t.destroy()},this.options.timeout))},r.prototype.stopTimer=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},Object.defineProperties(r.prototype,s),t.Snackbar=r,t.createSnackbar=function(t,e){return new r(t,e)},t.destroyAllSnackbars=function(){var t=[];return Object.keys(i).map(function(t){return i[t]}).forEach(function(e){return t.push.apply(t,e)}),Promise.all(t.map(function(t){return t.destroy()}))},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=snackbar.min.js.map
